{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Informaci\u00f3 del m\u00f2dul","text":""},{"location":"#professorat","title":"Professorat","text":"<ul> <li>Paco Galera</li> <li>Javier Beteta</li> </ul>"},{"location":"#serveis-en-xarxa","title":"Serveis en Xarxa","text":"<ul> <li>2n Sistemes Microinform\u00e0tics i en Xarxa (SMX)</li> <li>IES Jaume II el Just</li> <li>Tavernes de la Valldigna</li> <li>AULES</li> </ul>"},{"location":"#continguts","title":"Continguts","text":"<ol> <li>Interconnexi\u00f3 de xarxes</li> <li>Acc\u00e9s remot</li> <li>DHCP</li> <li>DNS</li> <li>HTTP</li> <li>FTP</li> <li>Proxy</li> <li>Wi-Fi</li> </ol>"},{"location":"#avaluacio","title":"Avaluaci\u00f3","text":"<ul> <li>Pr\u00f2ximament</li> </ul> <p>Consideracions</p> <ul> <li>Pr\u00f2ximament</li> </ul>"},{"location":"CanviMirror/","title":"Canvi del Mirror en Ubuntu 24.04 LTS","text":"<p>Degut al mal funcionament del mirror oficial d'Ubuntu a la xarxa de Conselleria, haurem de canviar el mirror dels nostres sistemes.</p>"},{"location":"CanviMirror/#localitzant-el-fitxer-de-fonts","title":"Localitzant el fitxer de fonts","text":"<p>Antigament, els mirrors d'ubuntu anaven definits al fitxer <code>/etc/apt/sources.list</code>. Per\u00f2 ja fa varies versions, que aquest fitxer ens envia a un directori on podem tindre diversos fitxers de mirrors. A la versi\u00f3 24.04 es fa \u00fas d'un fitxer localitzat en <code>/etc/apt/sources.list.d/ubuntu.sources</code> on podem trobar els mirrors en format descriptiu (antigament s'emprava el format en una sola linia).</p>"},{"location":"CanviMirror/#canviant-el-mirror","title":"Canviant el mirror","text":"<p>Per tant, el que farem ser\u00e0 consultar aquest fitxer i editar-lo:</p> Bash<pre><code>sudo nano /etc/apt/sources.list.d/ubuntu.sources\n</code></pre> <p>canviant el contingut del fitxer perqu\u00e8 fa\u00e7a \u00fas del mirror del Centro Inform\u00e1tico Cient\u00edfico de Andalucia (CICA), deixant el fitxer aix\u00ed:</p> Bash<pre><code>Types: deb deb-src\nURIs: http://ubuntu.cica.es/ubuntu/\nSuites: noble noble-security noble-updates noble-backports\nComponents: main restricted universe multiverse\nSigned-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg\n</code></pre> <p>NOTA: no \u00e9s necessari escriure-ho tot de zero, ser\u00e0 suficient amb canviar algunes linies!</p> <p>Una vegada modificat el fitxer, el guardem i actualitzem les fonts del sistema:</p> Bash<pre><code>sudo apt update\n</code></pre>"},{"location":"CanviMirror/#a-tenir-en-compte","title":"A tenir en compte","text":"<p>En el moment de crear aquest manual (Octubre 2024), el mirror del CICA \u00e9s un dels que millor funciona des de la xarxa del centre. Per\u00f2 existeixen altres, com el de la Universidad de Zaragoza que tamb\u00e9 funcionen b\u00e9. Per tal de canviar-lo, sols hauriem d'editar la l\u00ednia que fa refer\u00e8ncia a aquest (URIs):</p> Bash<pre><code>Types: deb deb-src\nURIs: http://softlibre.unizar.es/ubuntu/archive/\nSuites: noble noble-security noble-updates noble-backports\nComponents: main restricted universe multiverse\nSigned-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg\n</code></pre> <p>o incl\u00fas tindre els dos posats:</p> Bash<pre><code>Types: deb deb-src\nURIs: http://ubuntu.cica.es/ubuntu/ http://softlibre.unizar.es/ubuntu/archive/\nSuites: noble noble-security noble-updates noble-backports\nComponents: main restricted universe multiverse\nSigned-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg\n</code></pre>"},{"location":"CanviMirror/#mes-info","title":"M\u00e9s info","text":"<ul> <li>Ubuntu Manuals</li> </ul>"},{"location":"ManUbuntuServerDocker/","title":"Instal\u00b7laci\u00f3 de Docker en Ubuntu Server 24.04 LTS","text":""},{"location":"ManUbuntuServerDocker/#que-es-docker","title":"Qu\u00e8 \u00e9s Docker?","text":"<p>Docker \u00e9s una plataforma de codi obert que automatitza el desplegament d'aplicacions dins de contenidors de programari. Els contenidors permeten empaquetar una aplicaci\u00f3 amb totes les seves depend\u00e8ncies i executar-la de manera consistent en qualsevol entorn.</p>"},{"location":"ManUbuntuServerDocker/#avantatges-dutilitzar-docker-en-un-ubuntu-server","title":"Avantatges d'utilitzar Docker en un Ubuntu Server","text":"<ul> <li>Portabilitat: Els contenidors Docker poden executar-se en qualsevol sistema que tingui Docker instal\u00b7lat, independentment de les difer\u00e8ncies en les configuracions del sistema operatiu.</li> <li>A\u00efllament: Cada contenidor s'executa de manera a\u00efllada, la qual cosa evita conflictes entre aplicacions i millora la seguretat.</li> <li>Efici\u00e8ncia: Docker utilitza menys recursos que les m\u00e0quines virtuals tradicionals, ja que comparteix el nucli del sistema operatiu amb els contenidors.</li> <li>Desplegament r\u00e0pid: La creaci\u00f3 i el desplegament de contenidors \u00e9s molt m\u00e9s r\u00e0pid que la configuraci\u00f3 de m\u00e0quines virtuals.</li> <li>Escalabilitat: Docker facilita l'escalabilitat horitzontal, permetent desplegar m\u00faltiples inst\u00e0ncies d'una aplicaci\u00f3 de manera senzilla.</li> <li>Gesti\u00f3 senzilla: Amb Docker Compose i altres eines, \u00e9s f\u00e0cil gestionar m\u00faltiples contenidors i les seves configuracions.</li> </ul> <p>Utilitzar Docker en un Ubuntu Server permet una gesti\u00f3 m\u00e9s eficient i flexible dels serveis de xarxa, millorant la portabilitat, l'a\u00efllament i l'escalabilitat de les aplicacions.</p>"},{"location":"ManUbuntuServerDocker/#opcional-installar-docker-a-traves-dssh","title":"OPCIONAL: Instal\u00b7lar Docker a trav\u00e9s d'SSH","text":"<p>Per poder copiar i enganxar fragments de codi d'aquesta pr\u00e0ctica, es recomana accedir al nostre Servidor mitjan\u00e7ant SSH. Per tant, per poder comunicar la m\u00e0quina nostra amb la del VirtualBox, haurem de posar l'adaptador de la m\u00e0quina Virtual en mode pont. Una vegada arrancada la m\u00e0quina ens connectarem a ella amb els comandament: <code>ssh adminserver@IP_de_la_m\u00e0quinaV</code> i tot seguit, ens logarem amb la constrassenya d'administraci\u00f3.</p>"},{"location":"ManUbuntuServerDocker/#installacio","title":"Instal\u00b7laci\u00f3","text":""},{"location":"ManUbuntuServerDocker/#afegir-la-clau-gpg-oficial-de-docker","title":"Afegir la clau GPG oficial de Docker","text":"Bash<pre><code>sudo apt-get update\nsudo apt-get install ca-certificates curl\nsudo install -m 0755 -d /etc/apt/keyrings\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\nsudo chmod a+r /etc/apt/keyrings/docker.asc\n</code></pre>"},{"location":"ManUbuntuServerDocker/#afegir-el-repositori-a-les-fonts-apt","title":"Afegir el repositori a les fonts APT","text":"Bash<pre><code>echo \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt-get update\n</code></pre>"},{"location":"ManUbuntuServerDocker/#installar-lultimma-versio","title":"Instal\u00b7lar l'\u00faltimma versi\u00f3","text":"Bash<pre><code>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre>"},{"location":"ManUbuntuServerDocker/#comprovar-lestat-de-docker","title":"Comprovar l'estat de Docker","text":"Bash<pre><code>sudo systemctl status docker\ndocker --version\n</code></pre>"},{"location":"ManUbuntuServerDocker/#afegir-lusuari-adminserver-al-grup-docker","title":"Afegir l'usuari <code>adminserver</code> al grup <code>docker</code>","text":"Bash<pre><code>sudo usermod -aG docker adminserver\nsu - adminserver\n</code></pre>"},{"location":"ManUbuntuServerDocker/#comprovar-usuaris-grup-docker","title":"Comprovar usuaris grup Docker","text":"Bash<pre><code>id -nG\n</code></pre>"},{"location":"ManUbuntuServerDocker/#veure-els-comandaments-de-docker","title":"Veure els comandaments de Docker","text":"Bash<pre><code>docker\n</code></pre>"},{"location":"ManUbuntuServerDocker/#postinstallacio-descarregar-imatge-hello-world","title":"Postinstal\u00b7laci\u00f3: Descarregar imatge Hello-World","text":"Bash<pre><code>docker run hello-world\n</code></pre> <p>Si tot ha anat b\u00e9, haur\u00edem de veure alguna cosa semblant a a\u00e7\u00f2:</p> <p></p>"},{"location":"ManUbuntuServerDocker/#altres-comandaments-utils-de-docker","title":"Altres comandaments \u00fatils de Docker","text":"<ul> <li>BUSCAR IMATGE UBUNTU EN DOCKERHUB</li> </ul> <p><code>docker search ubuntu</code></p> <ul> <li>DESCARREGAR IMATGE UBUNTU</li> </ul> <p><code>docker pull ubuntu</code></p> <ul> <li>VEURE IMATGES DOCKER</li> </ul> <p><code>docker images</code></p> <ul> <li>EXECUTAR UN CONTENIDOR DE DOCKER</li> </ul> <p><code>docker run -it ubuntu</code> <code>apt update</code> <code>exit</code></p> <ul> <li>ADMINISTRAR CONTENIDORS DOCKER / VEURE CONTENIDORS ACTIUS</li> </ul> <p><code>docker ps</code></p> <ul> <li>VEURE CONTENIDORS ACTIUS I INACTIUS</li> </ul> <p><code>docker ps -a</code></p> <ul> <li>VEURE \u00daLTIM CONTENIDOR CREAT</li> </ul> <p><code>docker ps -l</code></p> <ul> <li>INICIAR UN CONTENIDOR</li> </ul> <p><code>docker start IDCONTENIDOR</code></p> <ul> <li>DETENIR CONTENIDOR</li> </ul> <p><code>docker stop IDCONTENIDOR</code></p> <ul> <li>ELIMINAR CONTENIDOR</li> </ul> <p><code>docker rm IDCONTENIDOR</code></p>"},{"location":"Prac1NAT/","title":"Pr\u00e0ctica UD1. NAT amb Ubuntu Server 24.04","text":"<p>Aquest document descriu la configuraci\u00f3 de xarxa d'un laboratori de xarxes muntat amb VirtualBox, format per dues m\u00e0quines virtuals: un Ubuntu Server 24.04 i un Lubuntu 24.04. A continuaci\u00f3 es descriu la configuraci\u00f3 de cada m\u00e0quina, la connectivitat entre elles i els passos per configurar la passarel\u00b7la per permetre l'acc\u00e9s a Internet des del Lubuntu a trav\u00e9s de l'Ubuntu Server.</p>"},{"location":"Prac1NAT/#configuracio-de-les-maquines","title":"Configuraci\u00f3 de les m\u00e0quines","text":""},{"location":"Prac1NAT/#ubuntu-server-2404","title":"Ubuntu Server 24.04","text":"<ul> <li>enp0s3: mode NAT, pren IP autom\u00e0ticament per DHCP.</li> <li>enp0s8: mode xarxa interna (intnet), IP fixa 192.168.1.1/24.</li> </ul> <p>Comprovaci\u00f3 de la configuraci\u00f3 de la interf\u00edcie enp0s8: Bash<pre><code>ip a show enp0s8\n</code></pre></p> <p>Si cal editar la configuraci\u00f3: Bash<pre><code>sudo nano /etc/netplan/00-installer-config.yaml\n</code></pre></p> <p>Configuraci\u00f3: YAML<pre><code>network:\n  ethernets:\n    enp0s3:\n      dhcp4: true\n    enp0s8:\n      addresses:\n        - 192.168.1.1/24\n  version: 2\n</code></pre></p> <p>Aplica els canvis amb: Bash<pre><code>sudo netplan apply\n</code></pre></p>"},{"location":"Prac1NAT/#lubuntu-2404","title":"Lubuntu 24.04","text":"<ul> <li>enp0s3: mode xarxa interna (intnet), IP fixa 192.168.1.40/24.</li> </ul> <p>Comprovaci\u00f3 de la configuraci\u00f3 de la interf\u00edcie enp0s3: Bash<pre><code>ip a show enp0s3\n</code></pre></p> <p>Si cal editar la configuraci\u00f3: Bash<pre><code>sudo nano /etc/netplan/00-installer-config.yaml\n</code></pre></p> <p>Configuraci\u00f3: YAML<pre><code>network:\n  ethernets:\n    enp0s3:\n      addresses:\n        - 192.168.1.40/24\n  version: 2\n</code></pre></p> <p>Aplica els canvis amb: Bash<pre><code>sudo netplan apply\n</code></pre></p>"},{"location":"Prac1NAT/#verificar-la-connectivitat","title":"Verificar la connectivitat","text":"<p>Un cop configurades les m\u00e0quines, cal verificar la connectivitat amb els seg\u00fcents pings:</p> <ul> <li> <p>Des de Lubuntu (ping a l'Ubuntu Server): Bash<pre><code>ping 192.168.1.1\n</code></pre></p> </li> <li> <p>Des de l'Ubuntu Server (ping a Lubuntu): Bash<pre><code>ping 192.168.1.40\n</code></pre></p> </li> </ul>"},{"location":"Prac1NAT/#configurar-la-passarella-opcional","title":"Configurar la passarel\u00b7la (opcional)","text":"<p>Per permetre que Lubuntu tingui acc\u00e9s a Internet a trav\u00e9s de l'Ubuntu Server, cal seguir aquests passos:</p>"},{"location":"Prac1NAT/#activar-el-forwarding-de-paquets-a-lubuntu-server","title":"Activar el forwarding de paquets a l'Ubuntu Server:","text":"<p>Editem el fitxer <code>/etc/sysctl.conf</code> per permetre el forwarding de paquets IPv4: Bash<pre><code>sudo nano /etc/sysctl.conf\n</code></pre> Descomentar la l\u00ednia: Bash<pre><code>net.ipv4.ip_forward=1\n</code></pre> Aplicar el canvi amb: Bash<pre><code>sudo sysctl -p\n</code></pre></p>"},{"location":"Prac1NAT/#configurar-nat-a-lubuntu-server","title":"Configurar NAT a l'Ubuntu Server:","text":"<p>Per permetre que el tr\u00e0nsit de la xarxa interna pugui sortir a Internet a trav\u00e9s de l'interf\u00edcie NAT (enp0s3), necessitem configurar NAT amb iptables.</p> <p>Afegeix la seg\u00fcent regla: Bash<pre><code>sudo iptables -t nat -A POSTROUTING -o enp0s3 -j MASQUERADE\n</code></pre></p>"},{"location":"Prac1NAT/#explicacio-del-comandament","title":"Explicaci\u00f3 del comandament:","text":"<ul> <li><code>iptables</code>: \u00c9s l'eina per gestionar les regles del tallafocs.</li> <li><code>-t nat</code>: Aquesta opci\u00f3 indica que volem treballar amb la taula de nat (Network Address Translation), que \u00e9s la que gestiona les traduccions d'adreces IP.</li> <li><code>-A POSTROUTING</code>: Afegeix (<code>-A</code>) una regla a la cadena POSTROUTING, que s'aplica despr\u00e9s que un paquet hagi estat rutejat. \u00c9s on es defineix la NAT de sortida.</li> <li><code>-o enp0s3</code>: La regla s'aplica als paquets que surten per la interf\u00edcie enp0s3 (que est\u00e0 en mode NAT i connecta la m\u00e0quina virtual a Internet).</li> <li><code>-j MASQUERADE</code>: Aquesta acci\u00f3 indica que el tr\u00e0nsit que surt per enp0s3 ha de tenir l'adre\u00e7a IP de la interf\u00edcie reempla\u00e7ada per l'adre\u00e7a p\u00fablica de la m\u00e0quina, permetent aix\u00ed la traducci\u00f3 d'adreces.</li> </ul> <p>Fer persistent la regla: Bash<pre><code>sudo apt install iptables-persistent\nsudo netfilter-persistent save\n</code></pre></p>"},{"location":"Prac1NAT/#configurar-la-passarella-a-lubuntu","title":"Configurar la passarel\u00b7la a Lubuntu:","text":"<p>A Lubuntu, configurem l'Ubuntu Server com a passarel\u00b7la per sortir a Internet i li afegim servidors DNS:</p> YAML<pre><code>network:\n  ethernets:\n    enp0s3:\n      addresses:\n        - 192.168.1.40/24\n      routes:\n        - to: default\n          via: 192.168.1.1\n      nameservers:\n        addresses: [8.8.8.8, 1.1.1.1]\n  version: 2\n</code></pre>"},{"location":"Prac1NAT/#resum-nat","title":"Resum NAT","text":""},{"location":"Prac2Telnet/","title":"UD2 - Pr\u00e0ctica 1 - Configuraci\u00f3 de Telnet i Captura de Paquets amb Wireshark","text":"<p>L'objectiu d'aquesta pr\u00e0ctica \u00e9s configurar i utilitzar Telnet per accedir remotament a un servidor Ubuntu des d'una m\u00e0quina client, demostrant la inseguretat d'aquest protocol mitjan\u00e7ant la captura de contrasenyes amb Wireshark. Aquesta pr\u00e0ctica es realitza en un entorn de m\u00e0quines virtuals a VirtualBox amb xarxes internes.</p>"},{"location":"Prac2Telnet/#escenari-del-laboratori","title":"Escenari del laboratori","text":"<ul> <li>M\u00e0quina Ubuntu Server 24.04 (Servidor Telnet): disposa de dues targetes de xarxa.</li> <li>NAT: per accedir a Internet i instal\u00b7lar paquets.</li> <li> <p>Xarxa interna (<code>intnet</code>): per establir connexi\u00f3 amb la m\u00e0quina client.</p> </li> <li> <p>M\u00e0quina Lubuntu (Client Telnet): utilitza una \u00fanica targeta de xarxa en xarxa interna (<code>intnet</code>) per accedir al servidor Ubuntu mitjan\u00e7ant Telnet.</p> </li> <li> <p>Opcional: Connexi\u00f3 des d'un client Windows 11.</p> </li> </ul>"},{"location":"Prac2Telnet/#pas-1-configuracio-de-les-maquines-virtuals-a-virtualbox","title":"Pas 1: Configuraci\u00f3 de les m\u00e0quines virtuals a VirtualBox","text":""},{"location":"Prac2Telnet/#11-ubuntu-server-servidor-telnet","title":"1.1 Ubuntu Server (Servidor Telnet)","text":"<ol> <li>Configura la m\u00e0quina Ubuntu Server amb dues targetes de xarxa:</li> <li>Primera targeta de xarxa: NAT (per accedir a Internet).</li> <li> <p>Segona targeta de xarxa: Xarxa interna (<code>intnet</code>).</p> </li> <li> <p>Configura l'adre\u00e7a IP est\u00e0tica de la targeta de xarxa interna (<code>intnet</code>):</p> </li> <li>A la m\u00e0quina Ubuntu Server, obre un terminal i edita el fitxer de configuraci\u00f3 de la xarxa:</li> </ol> Bash<pre><code>sudo nano /etc/netplan/00-installer-config.yaml\n</code></pre> <ul> <li>Afegeix aquesta configuraci\u00f3 per assignar una IP est\u00e0tica a la interf\u00edcie interna:</li> </ul> YAML<pre><code>network:\n  ethernets:\n    enp0s8:\n      dhcp4: no\n      addresses: [192.168.10.1/24]\n  version: 2\n</code></pre> <ul> <li>Aplica la configuraci\u00f3:</li> </ul> Bash<pre><code>sudo netplan apply\n</code></pre>"},{"location":"Prac2Telnet/#12-lubuntu-client-telnet","title":"1.2 Lubuntu (Client Telnet)","text":"<ol> <li> <p>Configura la m\u00e0quina Lubuntu amb una \u00fanica targeta de xarxa en xarxa interna (<code>intnet</code>).</p> </li> <li> <p>Assigna una IP est\u00e0tica dins de la mateixa subxarxa de la m\u00e0quina Ubuntu Server:</p> </li> <li>Obre un terminal a Lubuntu i edita el fitxer de configuraci\u00f3 de la xarxa:</li> </ol> Bash<pre><code>sudo nano /etc/netplan/00-installer-config.yaml\n</code></pre> <ul> <li>Afegeix aquesta configuraci\u00f3:</li> </ul> YAML<pre><code>network:\n  ethernets:\n    enp0s3:\n      dhcp4: no\n      addresses: [192.168.10.2/24]\n  version: 2\n</code></pre> <ul> <li>Aplica la configuraci\u00f3:</li> </ul> Bash<pre><code>sudo netplan apply\n</code></pre>"},{"location":"Prac2Telnet/#pas-2-installacio-i-configuracio-del-servei-telnet-a-ubuntu-server","title":"Pas 2: Instal\u00b7laci\u00f3 i configuraci\u00f3 del servei Telnet a Ubuntu Server","text":""},{"location":"Prac2Telnet/#21-installacio-del-servidor-telnet","title":"2.1 Instal\u00b7laci\u00f3 del servidor Telnet","text":"<ol> <li>A la m\u00e0quina Ubuntu Server, instal\u00b7la el paquet <code>telnetd</code>, que proporciona el servei Telnet:</li> </ol> Bash<pre><code>sudo apt update\nsudo apt install telnetd\n</code></pre>"},{"location":"Prac2Telnet/#22-configuracio-del-fitxer-etcinetdconf","title":"2.2 Configuraci\u00f3 del fitxer <code>/etc/inetd.conf</code>","text":"<p>Per habilitar el servei Telnet, hem de verificar i editar el fitxer de configuraci\u00f3 de <code>inetd</code>:</p> <ol> <li>Obre el fitxer <code>/etc/inetd.conf</code> amb un editor de text:</li> </ol> Bash<pre><code>sudo nano /etc/inetd.conf\n</code></pre> <ol> <li>Modifica la l\u00ednia del servei Telnet perqu\u00e8 s'executi amb l'usuari root. La l\u00ednia ha de ser aix\u00ed:</li> </ol> Bash<pre><code>telnet  stream  tcp     nowait  root    /usr/sbin/tcpd  /usr/sbin/in.telnetd\n</code></pre> <ol> <li> <p>Desa i tanca el fitxer (<code>Ctrl + O</code> per desar, <code>Ctrl + X</code> per sortir).</p> </li> <li> <p>Reinicia el servei <code>inetd</code> per aplicar els canvis:</p> </li> </ol> Bash<pre><code>sudo systemctl restart inetd\n</code></pre>"},{"location":"Prac2Telnet/#23-verificacio-del-servei-telnet","title":"2.3 Verificaci\u00f3 del servei Telnet","text":"<p>Comprova que el servei Telnet est\u00e0 en funcionament:</p> Bash<pre><code>sudo systemctl status inetd\n</code></pre> <p>Tamb\u00e9 pots verificar que el port 23 (Telnet) est\u00e0 escoltant amb:</p> Bash<pre><code>sudo netstat -tlnp | grep 23\n</code></pre>"},{"location":"Prac2Telnet/#pas-3-connexio-des-del-client-lubuntu","title":"Pas 3: Connexi\u00f3 des del client Lubuntu","text":""},{"location":"Prac2Telnet/#31-installacio-del-client-telnet","title":"3.1 Instal\u00b7laci\u00f3 del client Telnet","text":"<p>A la m\u00e0quina Lubuntu, instal\u00b7la el client Telnet:</p> Bash<pre><code>sudo apt update\nsudo apt install telnet\n</code></pre>"},{"location":"Prac2Telnet/#32-prova-de-connexio-amb-telnet","title":"3.2 Prova de connexi\u00f3 amb Telnet","text":"<p>Des de la m\u00e0quina Lubuntu, prova de connectar-te al servidor Ubuntu a trav\u00e9s de la xarxa interna (<code>intnet</code>):</p> Bash<pre><code>telnet 192.168.10.1\n</code></pre> <ul> <li>Un cop estiguis connectat, introdueix el nom d'usuari i la contrasenya del servidor.</li> <li>Un cop iniciada la sessi\u00f3, pots executar comandes com <code>ls</code> per veure el contingut del directori de connexi\u00f3.</li> </ul>"},{"location":"Prac2Telnet/#pas-4-captura-de-paquets-amb-wireshark","title":"Pas 4: Captura de paquets amb Wireshark","text":""},{"location":"Prac2Telnet/#41-installacio-de-wireshark","title":"4.1 Instal\u00b7laci\u00f3 de Wireshark","text":"<p>Si no tens Wireshark instal\u00b7lat a la m\u00e0quina Lubuntu, instal\u00b7la'l:</p> Bash<pre><code>sudo apt update\nsudo apt install wireshark\n</code></pre>"},{"location":"Prac2Telnet/#42-captura-de-paquets-telnet","title":"4.2 Captura de paquets Telnet","text":"<ol> <li>Obre Wireshark i selecciona la interf\u00edcie de xarxa interna (<code>enp0s3</code> o la que correspongui).</li> <li>Comen\u00e7a la captura de paquets.</li> <li>Mentre captures, torna a establir una connexi\u00f3 Telnet amb el servidor Ubuntu i autentica't com a usuari.</li> </ol>"},{"location":"Prac2Telnet/#43-filtratge-de-paquets","title":"4.3 Filtratge de paquets","text":"<p>Per a veure nom\u00e9s els paquets de Telnet, aplica el seg\u00fcent filtre a Wireshark:</p> Bash<pre><code>telnet\n</code></pre>"},{"location":"Prac2Telnet/#44-visualitzacio-de-la-contrasenya","title":"4.4 Visualitzaci\u00f3 de la contrasenya","text":"<p>Quan utilitzes Telnet per establir una connexi\u00f3 entre dues m\u00e0quines i introduir la contrasenya, aquesta normalment s'envia car\u00e0cter a car\u00e0cter. \u00c9s a dir, cada car\u00e0cter que escrius es transmet de manera individual al servidor.</p> <p>Com a Telnet no xifra les dades, aix\u00f2 vol dir que cada car\u00e0cter que introdueixes (incloent-hi la contrasenya) viatja per la xarxa en text pla. Quan analitzes el tr\u00e0fic amb Wireshark, cada car\u00e0cter del password es pot mostrar en una l\u00ednia diferent dins el registre de paquets capturats.</p> <p>El comportament que veus en Wireshark sol ser:</p> <p>Cada cop que prems una tecla, es genera un nou paquet que cont\u00e9 aquest car\u00e0cter. Wireshark captura aquests paquets per separat, mostrant un paquet per cada car\u00e0cter.</p>"},{"location":"Prac2Telnet/#pas-5-connexio-des-de-windows-11-opcional","title":"Pas 5: Connexi\u00f3 des de Windows 11 (Opcional)","text":""},{"location":"Prac2Telnet/#51-activacio-del-client-telnet-a-windows-11","title":"5.1 Activaci\u00f3 del client Telnet a Windows 11","text":"<p>Per defecte, el client Telnet a Windows 11 est\u00e0 desactivat. Per activar-lo:</p> <ol> <li>Obre el Panell de Control i selecciona <code>Programes</code>.</li> <li>Fes clic a Activa o desactiva les caracter\u00edstiques de Windows.</li> <li>A la llista de caracter\u00edstiques, cerca Client Telnet i activa'l.</li> <li>Fes clic a <code>Acceptar</code> per instal\u00b7lar-lo.</li> </ol>"},{"location":"Prac2Telnet/#52-connexio-telnet-des-de-windows-11","title":"5.2 Connexi\u00f3 Telnet des de Windows 11","text":"<ol> <li>Obre el S\u00edmbol del sistema (CMD).</li> <li>Executa la seg\u00fcent comanda per connectar-te al servidor Telnet (substitueix l'adre\u00e7a IP pel valor correcte):</li> </ol> Bash<pre><code>telnet 192.168.10.1\n</code></pre> <ol> <li>Introdueix el nom d'usuari i la contrasenya del servidor, de la mateixa manera que faries des d'una m\u00e0quina Linux.</li> </ol>"},{"location":"Prac2Telnet/#conclusions","title":"Conclusions","text":"<p>En aquesta pr\u00e0ctica, has configurat Telnet i has capturat el tr\u00e0nsit amb Wireshark, demostrant la inseguretat d'aquest protocol. Telnet transmet la informaci\u00f3, incloent les credencials, en text pla, cosa que permet a qualsevol capturar la contrasenya amb eines com Wireshark. Aix\u00f2 destaca la necessitat d'utilitzar protocols segurs com SSH per a connexions remotes.</p>"},{"location":"SMX2-SXA-1/","title":"UD1. Interconnexi\u00f3 de xarxes","text":""},{"location":"SMX2-SXA-1/#configuracio-de-la-xarxa","title":"Configuraci\u00f3 de la xarxa","text":"<p>Anem a veure comandes de terminal que existeixen per poder comprovar la nostra configuraci\u00f3 de la xarxa i com modificar alguns par\u00e0metres:</p> <ul> <li>Hostname o nom de l'equip</li> <li>Adre\u00e7a MAC</li> <li>Adre\u00e7a IP, m\u00e0scara de xarxa, adre\u00e7a de xarxa i adre\u00e7a de broadcast</li> <li>Gateway o porta d'enlla\u00e7</li> <li>Servidor DNS</li> <li>Propietats d'una connexi\u00f3 de xarxa</li> </ul>"},{"location":"SMX2-SXA-1/#nom-de-lequip","title":"Nom de l'equip","text":"<p>El hostname d'un equip \u00e9s el nom que s'assigna a aquest dispositiu dins d'una xarxa i algunes de les seues funcions son:</p> <ol> <li> <p>Identificaci\u00f3 de l'equip: El hostname \u00e9s una etiqueta \u00fanica que permet identificar un ordinador o dispositiu en una xarxa. \u00c9s com el nom propi de l'equip dins del context de la xarxa.</p> </li> <li> <p>Resoluci\u00f3 de noms: Quan es realitza una comunicaci\u00f3 a trav\u00e9s de la xarxa, els dispositius utilitzen adreces IP per trobar-se. El hostname es tradueix a una adre\u00e7a IP mitjan\u00e7ant el DNS (Domain Name System). Aix\u00f2 permet que els usuaris puguin accedir als recursos de xarxa utilitzant noms amigables en lloc d'adreces IP num\u00e8riques.</p> </li> <li> <p>Configuraci\u00f3 de serveis: El hostname tamb\u00e9 es fa servir per configurar serveis i aplicacions en un servidor. Per exemple, quan configures un servidor web, pots associar un hostname (com \"www.example.com\") a una determinada carpeta o aplicaci\u00f3 web.</p> </li> </ol> <p>En resum, el hostname \u00e9s una etiqueta que identifica un equip a la xarxa i facilita la comunicaci\u00f3 entre els dispositius mitjan\u00e7ant noms amigables.</p> <p></p>"},{"location":"SMX2-SXA-1/#adreca-ip-mascara-mac-i-adreca-de-broadcast","title":"Adre\u00e7a IP, M\u00e0scara, MAC i Adre\u00e7a de broadcast","text":"<p>El comandament que emprarem en sistemes Linux per obtindre informaci\u00f3 rellevant de la xarxa \u00e9s <code>ip a</code>. Amb aquest comandament obtindrem: adre\u00e7a IP i m\u00e0scara en format curt (etiqueta inet), Adre\u00e7a MAC (etiqueta link/ether) i adre\u00e7a de broadcast (etiqueta brd) de cadascun dels adaptadors de xarxa que tinguem instal\u00b7lats. L'adre\u00e7a de la xarxa no ens la mostra, per\u00f2 com em vist en unitats anteriors, la podem obtindre realitzant l'operaci\u00f3 IP AND M\u00e0scara.</p> <p>A sistemes Windows, el comandament equivalent \u00e9s <code>\u00ecpconfig /all</code>.</p> <p></p>"},{"location":"SMX2-SXA-1/#porta-denllac","title":"Porta d'enlla\u00e7","text":"<p>En Linux, la porta d'enlla\u00e7 o gateway s'obtenen gr\u00e0cies al comandament <code>ip r</code>. La linia que indica la porta d'enlla\u00e7 \u00e9s la que est\u00e0 etiquetada com a default.</p> <p>En sistemes windows, la porta d'enlla\u00e7 ve indicada tamb\u00e9 amb el comandament <code>ipconfig /all</code>.</p> <p></p>"},{"location":"SMX2-SXA-1/#servidors-dns","title":"Servidors DNS","text":"<p>Per obtindre informaci\u00f3 referent als servidors DNS configurats en sistemes Linux, haurem de consultar un fitxer mitjan\u00e7ant el comandament <code>cat /etc/resolv.conf</code>. Si al fitxer ens diu que el nameserver \u00e9s el 127.0.0.X significa que NetworkManager est\u00e0 configurat per iniciar una inst\u00e0ncia de la aplicaci\u00f3 dnsmasq que \u00e9s un servei local de reenviament de servidor de noms. Podem llavors, obtindre m\u00e9s infomaci\u00f3 amb el comandament <code>resolvectl status</code>.</p> <p>Novament, a sistemes Windows, aquesta informaci\u00f3 ens la donar\u00e0 el comandament <code>\u00ecpconfig /all</code>.</p>"},{"location":"SMX2-SXA-1/#informacio-del-driver-i-de-la-connexio","title":"Informaci\u00f3 del driver i de la connexi\u00f3","text":"<p>A sistemes Linux, aquesta informaci\u00f3 l'obtenim amb el comandament <code>ethtool</code>:</p> <ul> <li>Informacic\u00f3 del driver: <code>ethtool -i &lt;adaptador_xarxa&gt;</code></li> <li>Informaci\u00f3 de la connexi\u00f3: <code>ethtool &lt;adaptador_xarxa&gt;</code></li> </ul>"},{"location":"SMX2-SXA-1/#conexions-sense-fils","title":"Conexions sense fils","text":"<p>A sistemes Linux, emprarem el camndament <code>iwlist scan</code>per veure informaci\u00f3 extra, el comandament <code>iwconfig</code>. Sols mostrar\u00e0 informaci\u00f3 d'aquells adapatdors sense fils presents al sistema, evidentment.</p>"},{"location":"SMX2-SXA-1/#test-de-velocitat-de-la-xarxa-local","title":"Test de velocitat de la xarxa local","text":"<p>IPERF \u00e9s una ferramenta que s'utilitza per fer proves de velocitat en xarxes. Iperf crea fluxes de dades TCP i/o UDP i realitza un informe amb marques de temps amb la quantitat de dades transmeses i el rendiment mig. A\u00e7\u00f2 pot ser d'utilitat per comparar la velocitat de les tomes d'equips de xarxa cablejats i sense fils de forma imparcial.</p> <p>Es tracta de software de codi obert i pot executar-se en diverses plataformes incloent Linux, Unix i Windows. Per instalar-lo en sistemes Debian (Ubuntu) hem d'executar <code>sudo apt install iperf</code>.</p> <p>Iperf pot funcionar com a client (-c) o com a servidor (-s) i pot mesurar el rendiment entre els dos extrems de la comunicaci\u00f3 , unidireccional o bidireccionalment. Quan l'executem com a client (-c) hem d'afegir tamb\u00e9 l'adre\u00e7a IP de l'equip que actua com a servidor (-s).</p> <p>P\u00e0gina web del software Iperf</p> <p></p>"},{"location":"SMX2-SXA-1/#adaptadors-de-xarxa-en-virtualbox","title":"Adaptadors de xarxa en VirtualBox","text":"<p>Una m\u00e0quina virtual (MV) en VirtualBox (VB) pot tenir fins a 8 targetes de xarxa PCI Ethernet, i cadascuna d'elles, de manera independent, pot tenir assignat el tipus de hardware a virtualitzar i el seu propi mode de configuraci\u00f3. Des de l'administrador de VB es poden configurar 4 de les 8 targetes de xarxa, si ens feren falta m\u00e9s, hauriem de configurar-les per terminal mitjan\u00e7ant el programa VBoxManage.</p> <p>Per tal de configurar la xarxa del sistema virtualitzat, haurem de seleccionar la MV a la pantalla principal del VB i entrar en \"Configuraci\u00f3\" --&gt; \"Xarxa\".</p> <p></p> <p>Mitjan\u00e7ant el desplegable \"Connectat a:\" tindrem, en general, les seg\u00fcents opcions:</p> <ul> <li>NAT</li> <li>Xarxa NAT</li> <li>Adaptador pont</li> <li>Adaptador sols-amfitri\u00f3</li> <li>Xarxa interna</li> <li>No connectat</li> </ul> <p>Per a qu\u00e8 serveix el protocol NAT?</p> <p>NAT \u00e9s un protocol que fou creat per traduir les IPs privades de la xarxa en una IP p\u00fablica perqu\u00e8 la xarxa poguera enviar paquets a l'exterior; i traduir despr\u00e9s eixa IP p\u00fablica, de nou a la IP privada de l'equip que havia enviat el paquet, per tal que poguera rebre'l una vegada arribada la resposta.</p> <p></p>"},{"location":"SMX2-SXA-1/#nat-en-virtualbox","title":"NAT en VirtualBox","text":"<p>A VB \u00e9s el mode per defecte de la targeta de xarxa virtual. Amb aquesta opci\u00f3 el servei virtualitzat utilitza la targeta de xarxa de la m\u00e0quina real (amfitri\u00f3) per navegar. En mode NAT, VB col\u00b7loca un router entre l'amfitri\u00f3 (cap on fa NAT) i la m\u00e0quina virtual.</p> <p>Aquest router poseeix un servidor DHCP que serveix cap a l'interior i mapeja el tr\u00e0fic des de i cap a la MV de manera transparent. D'aquesta forma, si tenim configurat el client DHCP en el SO de la MV (opci\u00f3 habitualment per defecte), en mode NAT tindrem Internet autom\u00e0ticament a la MV.</p> <p>Cada MV en mode NAT tindr\u00e0 el seu propi router, per la qual cosa estaran en xarxes a\u00efllades, el que implica que, per defecte, les MMVV que tenen la seua targeta en mode NAT no poden veure's entre elles.</p> <p>L'adre\u00e7a que el router (intern) serveix (DHCP) va a dependre del n\u00famero de targeta de xarxa que estiga assignat en mode NAT. Les 8 targetes de xarxa que VB permet a cada MV van numerades del 0 al 7 i les adreces de xarxa dels routers segueixen el patr\u00f3 10.0.[x + 2].0/24, on x \u00e9s el n\u00famero de la targeta de xarxa (10.0.2.0/24, 10.0.3.0/24, ... , 10.0.9.0/24 ). L'adre\u00e7a IP de la targeta de xarxa ser\u00e0 10.0.x+2.15/24 i la porta d'enlla\u00e7 (router intern) 10.0.x+2.2/24.</p> Canvi d'adre\u00e7ament NAT en VirtualBox <p>Pot ser interessant canviar la numeraci\u00f3 motivats per el problema que estiguem resolent en un moment donat, i per fer-ho \u00e9s necessari rec\u00f2rrer al comandament VBoxManage de la seg\u00fcent forma:</p> <p><code>VBoxManage modifyvm \"Nom_de_la_MV\" --natnet1 192.168.0.0/16</code></p> <p>Amb l'ordre anterior, l'adaptador de xarxa n\u00famero 0 (--natnet1) de la MV \"Nom_de_la_MV\" pendr\u00e0 l'adre\u00e7a de xarxa 192.168.0.15/16 i la porta d'enlla\u00e7 192.168.0.2/16.</p> <p>Un desavantatge d'aquest mode, com hem vist, \u00e9s que la MV \u00e9s invisible i inalca\u00e7able fora de la seua xarxa i per tant, no podem instal\u00b7lar un servidor d'aquesta manera, a no ser que configurem el reenviament de ports. La qual cosa no est\u00e0 mal des del punt de vista de la seguretat.</p> Reenviament de ports en xarxa NAT de VirtualBox <p>Si per exemple, a la MV col\u00b7loquem un servidor SSH i volem que les peticions SSH al port 2222 de l'amfitri\u00f3 passen al port 22 del convidat (MV), on est\u00e0 el servidor SSH, redireccionarem els ports de la seg\u00fcent forma:</p> <p><code>VBoxManage modifyvm \"Nom_de_la_MV\" --natpf1 \"servidorSSH, tcp,, 2222,, 22\"</code></p> <p>Al posar --natpf1, estem dient que l'adaptador de xarxa 0 est\u00e0 en mode NAT i per ell rebr\u00e0 les peticions el servidor SSH</p> <p>El nom servidorSSH \u00e9s u nnom simb\u00f2lic que emprarem per gestionar aquesta redirecci\u00f3, per exemple, si volem eliminar-la:</p> <p><code>VBoxManage modifyvm \"Nom_de_la_MV\" --natpf1 delete servidorSSH</code></p> <p>En una redirecci\u00f3 on hem d'especificar les IPs, per exemple, l'amfitri\u00f3 t\u00e9 varies targetes i el convidatl'hem configurat de forma est\u00e0tica* (a pesar que la targeta estiga en mode NAT i per tant es tinga un servidor DHCP), la IP de l'amfitri\u00f3 va davant del port de l'amfitri\u00f3 i la IP de convidat, davant del port del convidat:</p> <p><code>VBoxManage modifyvm \"Nom_de_la_MV\" --natpf1 \"servidorSSH, tcp, 192.168.1.5, 2222, 10.0.2.50, 22\"</code></p> <p>El redireccionament de ports es pot fer tamb\u00e9 de forma gr\u00e0fica mitjan\u00e7ant la secci\u00f3 de \"Xarxa de la MV\".</p> <p></p> <p>Per a qu\u00e8 serveix el protocol DHCP?</p> <ul> <li>DHCP \u00e9s un protocol que es configura en servidors.</li> <li>Un servidor t\u00e9 un llistat d'adreces IP din\u00e0miques i les va assignant als clients conforme aquestes van quedant lliures, sabent en tot moment qui ha estat en posessi\u00ed d'eixes IP, quan de temps la ha tingut i qui se li ha assignat despr\u00e9s.</li> <li>Aix\u00ed els clients d'un xarxa IP poden aconseguir els seus par\u00e0metres de configuraci\u00f3 autom\u00e0ticament.</li> <li>Aquest protocol es va publicar en octubre de 1993 i la seua implementaci\u00f3 actual est\u00e0 en RFC 2131.</li> <li>Per a DHCPv6 es publica el RFC 331.</li> <li>VirtualBox permet configurar el servei DHCP en diverses modalitats: NAT, Xarxa Nat, Xarxa sols-amfitri\u00f3.</li> </ul>"},{"location":"SMX2-SXA-1/#xarxa-nat-en-virtualbox","title":"Xarxa NAT en VirtualBox","text":"<p>Funciona com el router de la nostra casa, \u00e9s a dir, **els equips que estiguen dins de la mateixa Xarxa NAT podran comunicar-se entre ells, i esta \u00e9s la difer\u00e8ncia amb el mode NAT vist anteriorment, el qual sempre contruia una xarxa amb un \u00fanic equip i no de dicersos com ara \u00e9s el cas.</p> <p></p>"},{"location":"SMX2-SXA-1/#creacio-duna-xarxa-nat","title":"Creaci\u00f3 d'una xarxa NAT","text":"<p>Podem fer-ho de dues formes:</p> <ul> <li>Des de l'int\u00e8rpret de comandes escriure'm <code>VBoxManage natnetwork add --netname CASA --network 192.168.0.0/24</code>.</li> <li>Des del men\u00fa del VB (les imatges corresponen a la versi\u00f3 6 de VB): \"Fitxer --&gt; Prefer\u00e8ncies --&gt; Xarxa\"</li> </ul> <p></p> <p>Des de l'entorn gr\u00e0fic podrem, tamb\u00e9, configurar el reenviament de ports.</p> <p>Podem llistar la informaci\u00f3 de les xarxaes NAT disponibles i aix\u00ed comprovar els par\u00e0metres que acabem de crear:</p> <p><code>VBoxManage list natnets</code></p> <p>Com podem veure, sols hi ha en aquest moment una \u00fanica xarxa NAT anomenada CASA i podem destacar la seg\u00fcent informaci\u00f3:</p> <p></p> <p>El servidor DHCP pot detindre's o activar-se de manera independent, amb els seg\u00fcents comandaments:</p> <p><code>VBoxManage natnetwork modify --netname CASA --dhcp off</code></p> <p><code>VBoxManage natnetwork modify --netname CASA --dhcp on</code></p> <p>La xarxa NAT pot detindre's i seria com apagar el router, \u00e9s a dir, la xarxa quedaria sense eixida a l'exterior encara que tindria connexi\u00f3 entre els equips connectats a la mateixa xarxa NAT:</p> <p><code>VBoxManage natnetwork stop --netname CASA</code></p> <p><code>VBoxManage natnetwork start --netname CASA</code></p> <p>Finalment, per eliminar la xarxa NAT executariem:</p> <p><code>VBoxManage natnetwork remove --netname CASA</code></p> <p>Aquestes opcions tamb\u00e9 poden fer-se des de l'entonr gr\u00e0fic de VB.</p>"},{"location":"SMX2-SXA-1/#adaptador-pont-en-virtualbox","title":"Adaptador pont en VirtualBox","text":"<p>El mode \"Adaptador pont\" simula que la targeta virtual est\u00e0 connectada al mateix switch que la targeta f\u00edsica de l'amfitri\u00f3, per tant, la MV va a comportar-se com si f\u00f2s un equip m\u00e9s dins de la mateixa xarxa f\u00edsica en la que est\u00e0 l'equip amfitri\u00f3. Aix\u00ed doncs, si l'amfitri\u00f3 obt\u00e9 una adre\u00e7a IP per DHCP, el host tamb\u00e9 la conseguir\u00e0. L'esquema de xarxa seria el seg\u00fcent:</p> <p></p> <p>Com aconsegueix VB simular-ho?</p> <p>Un bridge afig un nivell d'intelig\u00e8ncia a una connexi\u00f3 entre xarxes. Connecta dos segments de xarxes iguals o distints. Podem veure un bridge com un classificador de correu que mira les adreces dels paquets i els col\u00b7loca a la xarxa adequada.</p>"},{"location":"SMX2-SXA-1/#xarxa-interna","title":"Xarxa interna","text":"<p>Amb aquesta configuraci\u00f3 de targetes de xarxa, podem contruir xarxes a\u00efllades, en les quals sols hi haur\u00e0 communicaci\u00f3 entre les MMVV que pert\u00e0nyen a la mateixa xarxa interna.</p> <p></p> <p>Per tal de connectar xarxes internes a l'exterior, haurem de crear MMVV que funcionen com routers i disposen de dues targetes de xarxa, d'aquesta forma podrem contruir un cam\u00ed cap a Internet. Aquesta m\u00e0quina que funcionaria com a router, haur\u00e0 de tindre alguna de les seues targetes en NAT o pont, per poder ixir f\u00edsicament a l'exterior.</p> <p></p> <p>Les xarxes internes de VB s'identifiquen a trev\u00e9s d'un nom i totes les MMVV que tinguen una targeta en mode xarxa interna amb el mateix nom formaran una \u00fanica xarxa. El nom de la xarxa interna s'especifica despr\u00e9s de triar el mode; si no s'especifica, s'emprar\u00e0 la xarxa interna per defecte de VB, anomenada intnet.</p> <p></p>"},{"location":"SMX2-SXA-1/#adaptador-sols-amfitrio","title":"Adaptador sols-amfitri\u00f3","text":"<p>El mode \"sols-amfitri\u00f3\" s'empra per crear un xarxa interna a la que pertanyer\u00e0 tamb\u00e9 l'equip amfitri\u00f3, cosa que no succeeix al mode \"xarxa interna\".</p> <p>Justificaci\u00f3</p> <p>La connexi\u00f3 directa en una mateixa xarxa, de l'amfitri\u00f3 amb una o m\u00e9s MMVV, ha de fer-se emprant el \"mode pont\" el qual necessita per funcionar, que el cable f\u00edsic de xarxa estiga connectat a la targeta de xarxa de l'amfitri\u00f3. En cas contrari, \u00e9s com si estiguera apagat el switch que connecta a l'amfitri\u00f3 amb les MMVV, i per tant, no existeix connexi\u00f3 entre elles, ni amb l'amfitri\u00f3. Si estigu\u00e9ssem en una situaci\u00f3 en la qual no tingu\u00e9rem connexi\u00f3 de xarxa, no podriem treballa amb la configuraci\u00f3 anterior; aquest problema el resol el mode sols-amfitri\u00f3, doncs no empra la targeta f\u00edsica de la xarxa de l'amfitri\u00f3 sino que es crea una virtual que estar\u00e0 connectada al mateix switch virtual al que estaran connectades les targetes de xarxa de les MMVV amb el mateix mode de xarxa.</p> <p>Per poder fer \u00fas d'aquest mode, haurem de crear la targeta de xarxa virtual a l'equip amfitri\u00f3, per a tal cosa a l'administraci\u00f3 de VB anirem a Fitxer -&gt; Administrador de xarxa-amfitri\u00f3.</p> <p></p> <p>A partir d'aquest moment existeixen tantes targetes noves de xarxa com creem.</p> <p>Aquestes targetes hi ha que assignar-les una IP de la xarxa que h\u00e0gem triat, i a\u00e7\u00f2es fa configurant els camps del recuadre situat en la part inferior de la finestra. Ho farem seleccionant previament vboxnet0:</p> <p></p> <p>Tamb\u00e9 podrem activar un servidor DHCP per evitar configurar manualment les targetes de xarxa de les MMVV que es connecten...</p> Error E_ACCESSDENIED <p>Algunes de les activitats i pr\u00e0ctiques proposades necessiten de la modificaci\u00f3 de les xarxes sols anfitri\u00f3, per\u00f2 podem trobar-nos davant errors al moment de configurar-ho com el seg\u00fcent:</p> <p></p> <p>Aquest error es deu a que a partir de la versi\u00f3 6.1.28 van afegir unes noves configuracions, que entre altres coses acoten el rang v\u00e0lid de xarxes disponibles per a xarxes sols anfitri\u00f3.</p> <p>A\u00e7\u00f2 desemboca en que sols s'accepten xarxes sols anfitri\u00f3 en el rang 192.168.56.0/21.</p> <p>Per deshabilitar aquesta restricci\u00f3, editarem el fitxer /etc/vbox/networks.conf (que pot no existir i haurem de crear-lo) i afegirem el rang</p> <pre><code>* 0.0.0.0/0 ::/0\n</code></pre> <p>que b\u00e0sicament habilita totes les xarxes. D'aquesta forma podrem emprar qualsevol xarxa en mode sols anfitri\u00f3.</p> <p></p> <p></p>"},{"location":"SMX2-SXA-1/#netplan","title":"Netplan","text":"<p>Amb l'arribada d' Ubuntu 18.04 arrib\u00e0ren canvis a la configuraci\u00f3 dels serveis de xarxa.</p> <p></p> <p>A les versions anteriors, tota la configuraci\u00f3 es realitzava per interf\u00edcie gr\u00e0fica o mitjan\u00e7ant fitxers de configuraci\u00f3, situats en /etc/network. A partir d'ara, tindrem les dues opcions, per\u00f2 els fitxers de configuraci\u00f3 es troben a /etc/netplan i tenen extensi\u00f3 yaml.</p> <p></p> <p>Aquest fitxer \u00e9s el que tindrem que modificar per tal d'aconseguir la configuraci\u00f3 de xarxa que necessitem en cada cas.</p> <p></p> <p>Aquesta \u00e9s la configuraci\u00f3 per defecte de la xarxa. Amb aquesta configuraci\u00f3 \u00e9s la interf\u00edcie gr\u00e0fica l'encarregada de controlar tots els dispositius de la xarxa. Aquesta opci\u00f3 s'estableix a la linia: <code>renderer: NetworkManager</code>.</p> <p>A la majoria dels casos amb aquesta configuraci\u00f3 tindrem suficient per\u00f2 no tindrem control sobre els dispossitius de la xarxa.</p> <p>Per tal d'indicar que anem a ser nosaltres els qui definim el comportament i configuraci\u00f3 de les interf\u00edcies de xarxa , haurem de modificar la linia anterior per: <code>renderer: networkd</code>.</p> <p>A partir d'aquest moment haurem d'especificar tota la informaci\u00f3 necess\u00e0ria per al funcionament dels dispositius de xarxa.</p> <p>Anem a veure diferents exemples de configuraci\u00f3ns de netplan, aquests exemples s\u00f3n b\u00e0sics per\u00f2 suficients per poder realitzar exercicis.</p> <p>Informaci\u00f3</p> <p>Abans de veure els exemple, hi ha que tindre en compte que els fitxers en format yaml no accept\u00e0ven tabulacions al principi i per tal de realitzar les sangr\u00edes del text hav\u00edem d'emprar espais.</p> <p>A les versions m\u00e9s noves d'Ubuntu el fitxers yaml ja suporten la tabulaci\u00f3.</p>"},{"location":"SMX2-SXA-1/#configurar-targeta-de-xarxa-per-dhcp","title":"Configurar targeta de xarxa per DHCP","text":"<pre><code>network:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp0s3:\n      dhcp4: yes\n</code></pre> <p>On podem veure:</p> <ul> <li><code>renderer: networkd</code> -- configurem nosaltres el dispositius de xarxa</li> <li><code>ethernets</code> -- interf\u00edcies de xarxa a aconfigurar</li> <li><code>enp0s3</code> -- nom de la interf\u00edcie de xarxa a configurar</li> <li><code>dhcp4: yes</code> -- DHCP activat</li> </ul> <p>Aquest tipus de configuaci\u00f3 la utilitzarem quan tinguem una targeta de xarxa sobre un adaptador de VirtualBox que accepte DHCP, \u00e9s a dir, NAT, Xarxa NAT i Sols anfitri\u00f3.</p>"},{"location":"SMX2-SXA-1/#configurar-targeta-de-xarxa-amb-ip-fixa","title":"Configurar targeta de xarxa amb IP fixa","text":"<p><pre><code>network:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp0s3:\n      addresses: [10.0.2.10/24]\n      nameservers:\n        addresses: [8.8.8.8, 8.8.4.4]\n      routes:\n        - to: default\n          via: 10.0.2.2\n</code></pre> A banda dels punts anteriors podem veure:</p> <ul> <li><code>addresses: [10.0.2.10/24]</code> -- adre\u00e7a de xarxa en format CIDR</li> <li><code>nameservers:</code> -- a partir d'aquesta linia, configuraci\u00f3 dels DNS.</li> <li><code>routes:</code> -- gesti\u00f3 d'enrutament local, per exemple: porta d'enlla\u00e7 (to: default - via...)</li> </ul> <p>Gateway4 deprecated</p> <pre><code>network:\n    version: 2\n    renderer: networkd\n    ethernets:\n        enp0s3:\n            address: [10.10.10.2/24]\n            gateway4: 10.10.10.1\n            nameservers:\n                addresses: [8.8.8.8, 8.8.4.4]\n</code></pre>"},{"location":"SMX2-SXA-1/#aplicar-les-configuracions","title":"Aplicar les configuracions","text":"<p>La modificaci\u00f3 del fitxer ubicat en /etc/netplan/ no implica que s'apliquen els canvis.  Cada vegada que modifiquem aquest fitxer yaml haurem de realitzar algunes accions:</p> <ul> <li><code>sudo netplan -debug try</code>: tracta d'aplicar la configuraci\u00f3 que hem definit. Si no hi ha errades ixir\u00e0 un contador per tornar a la configuraci\u00f3 anterior o polsant ENTER aplicar la nova.</li> <li><code>sudo netplan apply</code>: aplica directament la configuraci\u00f3 que hem definit. S'ha d'emprar en el cas d'estar completament segur que tot \u00e9s correcte.</li> </ul> <p></p>"},{"location":"SMX2-SXA-2/","title":"UD2. Acc\u00e9s remot","text":""},{"location":"SMX2-SXA-2/#introduccio","title":"Introducci\u00f3","text":"<p>La capacitat per accedir remotament a arxius i informaci\u00f3 en el vostre ordinador a trav\u00e9s d\u2019Internet \u00e9s \u00fatil tant per treballar com per jugar. Pot ser \u00fatil tant per recuperar un arxiu oblidat a l\u2019ordinador com per permetre a un administrador de sistemes accedir a un servidor i modificar-ne la configuraci\u00f3. Tamb\u00e9 \u00e9s utilitzat per les companyies per permetre que els seus treballadors accedeixin al seu sistema i aix\u00ed poder utilitzar informaci\u00f3 important, ja sigui des de les oficines del client o des de casa seva.</p> <p>Aquest \u00fas tan diversificat fa que hi hagi moltes tecnologies disponibles per permetre aquest tipus d\u2019acc\u00e9s: des del sistema de fitxers compartit incorporat en la majoria de sistemes operatius fins a eines m\u00e9s espec\u00edfiques desenvolupades per empreses.</p> <p>L\u2019\u00fas tan divers fa que tamb\u00e9 hi hagi una gran diversitat de maneres i mitjans d\u2019accedir remotament a informaci\u00f3. Per fer front a la diversitat hi ha diferents protocols i eines que permeten tenir acc\u00e9s des d\u2019un port\u00e0til amb connexi\u00f3 WiFi, un tel\u00e8fon m\u00f2bil amb GPRS o una connexi\u00f3 fixa d\u2019Internet.</p> <p>Tamb\u00e9 val a dir que mentre que gaireb\u00e9 sempre pensem en acc\u00e9s remot a ordinadors o servidors, hi ha un altre tipus d\u2019acc\u00e9s remot que cada cop t\u00e9 m\u00e9s difusi\u00f3: l\u2019acc\u00e9s remot a dispositius dom\u00e8stics.</p> <p>A una casa podem trobar molts dispositius que es poden controlar remotament. Per exemple, mentre estem de vacances podem connectar remotament algun llum per fer veure que hi ha alguna persona a casa i dissuadir els possibles lladres. Aquesta tecnologia, amb la propera implantaci\u00f3 del protocol IPv6 es far\u00e0 extensible a un nombre encara m\u00e9s elevat i a m\u00e9s tipus de dispositius i electrodom\u00e8stics. Encara que s\u2019escapa dels objectius d\u2019aquesta unitat formativa, vol\u00edem fer una pinzellada per mostrar que l\u2019acc\u00e9s remot t\u00e9 cada cop m\u00e9s import\u00e0ncia i que, en un futur immediat, estar\u00e0 present en aspectes molt diversos de les nostres vides.</p> <p>Cal saber...</p> <ul> <li>LAN: Una LAN (de l\u2019angl\u00e8s local area network o xarxa d\u2019\u00e0rea local) \u00e9s un tipus de xarxa inform\u00e0tica caracteritzada pel seu car\u00e0cter \u201clocal\u201d o de dist\u00e0ncia curta, com ara una casa, una oficina, un hotel, etc., \u00e9s a dir, la seva extensi\u00f3 est\u00e0 limitada a uns 200 metres i podria arribar a un quil\u00f2metre si es fessin servir repetidors.</li> <li>TELNET: \u00c9s un protocol que emula un terminal remot per connectar-se a una m\u00e0quina multiusuari. El seu principal problema \u00e9s la seguretat.</li> <li>SSH: (Secure SHell) \u00e9s el nom d\u2019un protocol i del programa que l\u2019implementa, i serveix per accedir a m\u00e0quines remotes a trav\u00e9s de la xarxa. Permet gestionar completament l\u2019ordinador mitjan\u00e7ant l\u2019int\u00e8rpret d\u2019ordres.</li> <li>GPRS: \u00c9s l\u2019acr\u00f2nim de general packet radio service (servei general de paquets via r\u00e0dio). \u00c9s el sistema que, afegit al GSM, permet la transmissi\u00f3 de paquets de dades no vocals.</li> <li>IPv6: \u00c9s la versi\u00f3 6 del protocol d\u2019Internet (IP), un est\u00e0ndard de nivell de xarxa que s\u2019encarrega de dirigir i encaminar els paquets commutats. Est\u00e0 dissenyat per substituir l\u2019actual IPv4, ja que el seu l\u00edmit en el nombre d\u2019adreces de xarxa disponibles est\u00e0 comen\u00e7ant a restringir el creixement d\u2019Internet (l\u2019elevat increment d\u2019assignacions a zones d\u2019\u00c0sia n\u2019est\u00e0 accelerant l\u2019exhauriment). Actualment, ja hi ha assignades m\u00e9s de 2/3 parts de qu\u00e8 disposa. La nova IPv6 permetr\u00e0 proporcionar als futurs tel\u00e8fons cel\u00b7lulars i m\u00f2bils una direcci\u00f3 fixa i pr\u00f2pia per a cada un d\u2019ells.</li> </ul>"},{"location":"SMX2-SXA-2/#usos-mes-frequents-de-lacces-remot-a-ordinadors","title":"Usos m\u00e9s freq\u00fcents de l'acc\u00e9s remot a ordinadors","text":"<p>El programari que permet l\u2019administraci\u00f3 remota \u00e9s cada vegada m\u00e9s com\u00fa i s\u2019utilitza sovint quan \u00e9s dif\u00edcil o molt dif\u00edcil estar f\u00edsicament a prop d\u2019un sistema per usar-lo o per tal d\u2019accedir al material d\u2019Internet que no est\u00e0 disponible en la mateixa ubicaci\u00f3.</p> <p>Els servidors i altres equips de xarxa, per diverses raons, a vegades es distribueixen a dist\u00e0ncies considerables. Fins i tot quan estan relativament a prop, dins del mateix edifici o la mateixa planta, poden estar instal\u00b7lats en espais amb acc\u00e9s dificult\u00f3s o restringit. Per aquestes raons l\u2019administraci\u00f3 remota, \u00e9s a dir l\u2019administraci\u00f3 d\u2019un equip des d\u2019un altre equip, \u00e9s una necessitat quotidiana.</p> <p>A continuaci\u00f3 mostrem una llista d\u2019algunes de les tasques m\u00e9s comunes:</p> <ul> <li>Generals: controlar un ordinador des d\u2019un lloc remot. Per exemple: accedir a un ordinador personal des d\u2019un caf\u00e8 d\u2019Internet.<ul> <li>Apagar o reiniciar un ordinador remot.</li> </ul> </li> <li>Accedir a perif\u00e8rics<ul> <li>\u00das d\u2019un perif\u00e8ric connectat a la xarxa, com per exemple una impressora.</li> <li>Recuperar dades d\u2019un flux de dades, com per exemple de les c\u00e0meres d\u2019un circuit tancat de televisi\u00f3.</li> </ul> </li> <li>Modificar dades<ul> <li>Modificar la configuraci\u00f3 d\u2019un ordinador remot.</li> <li>Modificar el serveis que hi ha configurats en un servidor.</li> <li>Instal\u00b7lar o desinstal\u00b7lar programari en un ordinador remot.</li> </ul> </li> <li>Visualitzar<ul> <li>Assist\u00e8ncia remota a usuaris.</li> <li>Supervisar l\u2019\u00fas d\u2019un ordinador o de la navegaci\u00f3 per Internet.</li> </ul> </li> </ul>"},{"location":"SMX2-SXA-2/#diferents-tipus-dacces-remot","title":"Diferents tipus d'acc\u00e9s remot","text":"<p>Les tasques d\u2019acc\u00e9s i administraci\u00f3 remots es poden dur a terme amb mitjans diferents, per\u00f2 sempre estaran condicionats per la xarxa que connecta l\u2019equip que cal administrar amb l\u2019estaci\u00f3 on est\u00e0 l\u2019administrador.</p> <p>La xarxa imposar\u00e0 condicions de:</p> <ul> <li>Capacitat: si la connexi\u00f3 no t\u00e9 una amplada de banda suficient no ser\u00e0 pr\u00e0ctic treballar amb una interf\u00edcie gr\u00e0fica remota. Com m\u00e9s augmenti el retard en la xarxa m\u00e9s frustrant ser\u00e0 el treball interactiu.</li> <li>Seguretat: \u00e9s obvi que la comunicaci\u00f3 entre l\u2019administrador i l\u2019equip remot no ha de ser interceptada per altres usuaris de la xarxa.</li> </ul> <p>Els diferents mitjans d\u2019administraci\u00f3 remota es poden classificar en tres categories b\u00e0siques:</p> <ul> <li>Sessi\u00f3 de treball a la consola</li> <li>Sessi\u00f3 de treball amb interf\u00edcie gr\u00e0fica</li> <li>Client o eina d\u2019administraci\u00f3 local</li> </ul> <p>Cada categoria t\u00e9 els seus punts forts i febles. Una sessi\u00f3 de treball a la consola mitjan\u00e7ant SSH, o l\u2019obsolet i insegur Telnet, no exigeix grans capacitats a la xarxa. \u00c9s el m\u00e8tode m\u00e9s lleuger i fins i tot es pot utilitzar amb comoditat per administrar m\u00e0quines molt distants o amb xarxes de capacitat escassa. A m\u00e9s, \u00e9s relativament senzill automatitzar tasques mitjan\u00e7ant guions de programaci\u00f3 per repetir les mateixes operacions en un conjunt de m\u00e0quines.</p> <p>L\u2019administraci\u00f3 remota amb interf\u00edcie gr\u00e0fica permet obrir a l\u2019estaci\u00f3 local finestres d\u2019aplicacions que s\u2019executen en el servidor remot. Fins i tot permet veure l\u2019escriptori complet de l\u2019estaci\u00f3 remota. Tot i que pot ser un m\u00e8tode de treball c\u00f2mode, requereix capacitats de la xarxa que normalment nom\u00e9s es troben disponibles dins d\u2019una LAN.</p> <p>Emprar una eina d\u2019administraci\u00f3 local feta a mida, com un assistent per configurar una impressora remota, o gen\u00e8rica, com un navegador web, intenta conjugar punts forts de les dues t\u00e8cniques anteriors. En aquest cas l\u2019administrador dialoga amb una aplicaci\u00f3 local o una p\u00e0gina web i no necessita recordar ordres. A m\u00e9s, donat que la representaci\u00f3 gr\u00e0fica es produeix localment no s\u2019exigeix gran capacitat a la xarxa. El problema de les eines espec\u00edfiques \u00e9s que es tracta d\u2019un programari que cal instal\u00b7lar a cada estaci\u00f3 que l\u2019administrador vulgui emprar. Sovint aquesta eina nom\u00e9s est\u00e0 disponible per a un sistema operatiu o per a una versi\u00f3 determinada d\u2019aquest. Aquest problema s\u2019obvia amb les interf\u00edcies web, ja que un navegador web \u00e9s un programari com\u00fa que es troba en tots els equips. En la taula.1 podeu veure un resum dels principals avantatges i inconvenients.</p> M\u00e8tode d'administraci\u00f3 Avantatges Inconvenients Treball a la l\u00ednia d\u2019ordres Requisits m\u00ednims per a la xarxa. \u00c9s flexible i es pot automatitzar. Cal con\u00e8ixer la sintaxi i recordar les ordres Interf\u00edcie gr\u00e0fica Visual i flexible. No cal recordar ordres. Imposa requisits de capacitat a la xarxa Client local Visual i flexible. No cal recordar ordres. No consumeix gaires recursos a la xarxa. Si no es tracta d\u2019una interf\u00edcie web, cal instal\u00b7lar programari. <p>En l'actualitat algunes de les ferramentes d'administraci\u00f3 remota m\u00e9s utilitzades s\u00f3n:</p> <ul> <li>En mode text (l\u00ednia d'ordres): telnet, Secure Shell (SSH).</li> <li>En mode gr\u00e0fic (interf\u00edcie gr\u00e0fica): VNC, Terminal Server.</li> <li>Client local (interf\u00edcies web): La majoria de dispositius disposen d'un servidor web lleuger que permet la seua configuraci\u00f3. Tamb\u00e9 hi ha aplicacions com Webmin per a servidor basats en Linux.</li> </ul>"},{"location":"SMX2-SXA-2/#acces-remot-amb-linia-dordres","title":"Acc\u00e9s remot amb l\u00ednia d'ordres","text":""},{"location":"SMX2-SXA-2/#telnet","title":"Telnet","text":"<p>Telnet \u00e9s un protocol que emula un terminal remot per a connectar-se a una m\u00e0quina multiusuari. Igual que amb el protocol FTP, cal el programari necessari i un protocol espec\u00edfic per aquest servei.</p> <p>El port que s'utilitza \u00e9s generalment el 23. Nom\u00e9s serveix per accedir-hi en mode terminal, \u00e9s a dir, sense gr\u00e0fics, per\u00f2 va ser una eina molt \u00fatil per arreglar problemes a dist\u00e0ncia. Tamb\u00e9 s'ha fet servir per consultar dades a dist\u00e0ncia, com dades personals accessibles a trav\u00e9s de la xarxa, informaci\u00f3 bibliogr\u00e0fica, etc. Els requisits per accedir a aquest servei s\u00f3n molt senzills: con\u00e8ixer el nom i l'adre\u00e7a del servidor remot i estar habilitat per a poder utilitzar-lo mitjan\u00e7ant un identificador d'usuari i una contrasenya. Normalment es crida a una aplicaci\u00f3 externa que \u00e9s la que realitza la connexi\u00f3. En aquest cas s'ha d'indicar la m\u00e0quina i el login: <code>telnet://maquina.domini@login</code>.</p> <p>El seu principal problema \u00e9s de seguretat, ja que tots els noms d'usuari i contrasenyes necess\u00e0ries per entrar a les m\u00e0quines viatjaven per la xarxa sense xifrar. Aix\u00f2 feia que qualsevol persona que espies el tr\u00e0fic de la xarxa pogu\u00e9s obtenir aquestes dades i d'aquesta manera accedir tamb\u00e9 a les m\u00e0quines. Es va deixar de fer servir quasi totalment, fa uns anys, quan va apar\u00e8ixer i es va popularitzar l'SSH, que es pot descriure com una versi\u00f3 xifrada de Telnet.</p> PR\u00c0CTICA 1: Acc\u00e9s remot mitjan\u00e7ant Telnet <p>L\u2019objectiu d\u2019aquesta activitat \u00e9s utilitzar el programari Telnet per accedir remotament a una m\u00e0quina.</p> <p>Per fer aquesta pr\u00e0ctica haureu de disposar de dues m\u00e0quines, la local i la remota. En cas que no fos aix\u00ed, podeu instal\u00b7lar el client i el servidor a la mateixa m\u00e0quina.</p> <p>Seguiu les instruccions seg\u00fcents per fer l'activitat.</p> <ol> <li> <p>Instal\u00b7leu el programa client i el servidor Telnet: <code>telnet</code> i <code>telnetd</code> en el Ubuntu Server de la m\u00e0quina virtual.</p> </li> <li> <p>Un cop instal\u00b7lats tots els paquets de programari, procediu a reiniciar els serveis de xarxa.</p> </li> <li> <p>Accediu remotament des del client al servidor i feu una llista del contingut del directori de connexi\u00f3.</p> </li> <li> <p>Accediu des del client Windows i tracteu de capturar els paquets amb Wireshark per a aconseguir la contrasenya.</p> </li> </ol> <p>Documenta el proc\u00e9s amb captures i comentaris.</p>"},{"location":"SMX2-SXA-2/#introduccio-a-la-criptografia","title":"Introducci\u00f3 a la criptografia","text":"<p>La criptografia ens aporta t\u00e8cniques per encriptar i desencriptar informaci\u00f3, de manera que es puguin transmetre, amb seguretat, missatges per un canal que no \u00e9s de confian\u00e7a. L\u2019objectiu evident \u00e9s assegurar que el missatge transm\u00e8s romandr\u00e0 secret. Per\u00f2 a les comunicacions electr\u00f2niques tamb\u00e9 s\u2019utilitza sovint per autenticar que l\u2019emissor i el destinatari del missatge s\u00f3n qui pensem i per garantir que el mateix missatge no ha estat alterat durant la seva transmissi\u00f3.</p> <p>Hi ha diferents t\u00e8cniques criptogr\u00e0fiques, per\u00f2 dues de les m\u00e9s emprades s\u00f3n:</p> <ul> <li>Criptografia sim\u00e8trica o de clau compartida</li> <li>Criptografia asim\u00e8trica o de clau p\u00fablica</li> </ul>"},{"location":"SMX2-SXA-2/#criptografia-de-clau-compartida","title":"Criptografia de clau compartida","text":"<p>En emprar un algorisme d\u2019encriptaci\u00f3 de clau compartida s\u2019utilitza la mateixa clau per encriptar i desencriptar. Aquesta caracter\u00edstica \u00e9s el seu principal inconvenient, ja que si es vol canviar la clau es necessitar\u00e0 un mitj\u00e0 de comunicaci\u00f3 segur per fer-la arribar de l\u2019emissor al receptor. El principal avantatge de la criptografia sim\u00e8trica \u00e9s la seva velocitat. Alguns algorismes d\u2019encriptaci\u00f3 sim\u00e8trics s\u00f3n: 3DES, AES, Blowfish i IDEA.</p>"},{"location":"SMX2-SXA-2/#criptografia-de-clau-publica","title":"Criptografia de clau p\u00fablica","text":"<p>La criptografia asim\u00e8trica o de clau p\u00fablica evita el problema de l\u2019intercanvi de claus. En aquest cast, tant l\u2019emissor com el receptor tindran una parella de claus diferents. A cada parella de claus n\u2019hi ha una de p\u00fablica i una de privada. La clau privada mai no viatja pel canal de comunicaci\u00f3, cal garantir-ne la protecci\u00f3. La clau p\u00fablica, com el seu nom indica, es pot oferir a tothom que la demani, pot viatjar per mitjans insegurs o fins i tot es pot publicar.</p> <p>Cada parella de claus est\u00e0 fortament relacionada:</p> <ul> <li>Els missatges que s\u2019encripten emprant una clau p\u00fablica nom\u00e9s es poden desencriptar mitjan\u00e7ant la clau privada associada.</li> <li>Les claus privades permeten signar un missatge per tal que el receptor verifiqui la identitat de l\u2019emissor. La comprovaci\u00f3 de la signatura es far\u00e0 mitjan\u00e7ant la clau p\u00fablica associada.</li> </ul> <p>En una comunicaci\u00f3 t\u00edpica tindrem els passos que es mostren a continuaci\u00f3 i que podeu veure de manera gr\u00e0fica en la figura:</p> <p></p> <ol> <li>L\u2019emissor far\u00e0 servir la seva pr\u00f2pia clau privada per signar el missatge.</li> <li>L\u2019emissor far\u00e0 servir la clau p\u00fablica del receptor per encriptar el missatge.</li> <li>Es transmet el missatge encriptat i signat.</li> <li>El receptor desencriptar\u00e0 el missatge fent servir la seva pr\u00f2pia clau privada.</li> <li>El receptor comprovar\u00e0 la signatura del missatge fent servir la clau p\u00fablica de l\u2019emissor.</li> </ol> <p>En aquest procediment mai no es transmeten les claus privades. L\u2019intercanvi de les claus p\u00fabliques \u00e9s senzill, ja que no cal que es transmetin fent \u00fas d\u2019un canal segur. Es garanteix que el missatge no pot ser comprom\u00e8s en la seva transmissi\u00f3 i tant l\u2019emissor com el receptor comproven l\u2019autenticitat de l\u2019altra entitat.</p> <p>El principal inconvenient de la criptografia de clau p\u00fablica \u00e9s el seu consum de recursos. \u00c9s m\u00e9s costosa en temps d\u2019encriptaci\u00f3/desencriptaci\u00f3 i el missatge encriptat ocupa m\u00e9s que el text clar. En la taula seg\u00fcent podeu veure un resum dels principals avantatges i inconvenients de les diferents t\u00e8cniques criptogr\u00e0fiques.</p>"},{"location":"SMX2-SXA-2/#criptografia-hibrida","title":"Criptografia h\u00edbrida","text":"<p>La criptografia h\u00edbrida combina el sistema de clau compartida i el de clau p\u00fablica per obtenir tots els avantatges sense els inconvenients. En aquest sistema nom\u00e9s s\u2019utilitza la criptografia de clau p\u00fablica per transmetre una clau compartida, normalment generada de manera din\u00e0mica per aquesta comunicaci\u00f3, al receptor. Una vegada s\u2019ha comunicat la clau compartida a totes dues estacions, s\u2019utilitza l\u2019encriptaci\u00f3 convencional per tal d\u2019encriptar el gruix del missatge.</p> <p>Els sistemes basats en criptografia h\u00edbrida s\u00f3n tan forts com els sistemes de clau compartida i clau p\u00fablica que utilitzin.</p> T\u00e8cnica criptogr\u00e0fica Avantatges Inconvenients Criptografia clau compartida. Consumeix pocs recursos. S\u2019encripta/desencripta amb gran velocitat L\u2019intercanvi de claus necessita un canal segur Criptografia clau p\u00fablica. No necessita un canal segur per intercanviar les claus. Consumeix recursos. El proc\u00e9s d\u2019encriptaci\u00f3/desencriptaci\u00f3 \u00e9s lent Criptografia h\u00edbrida. S\u2019encripta/desencripta amb gran velocitat."},{"location":"SMX2-SXA-2/#secure-shell-ssh","title":"Secure SHell (SSH)","text":"<p>SSH \u00e9s un protocol de xarxa que permet l\u2019intercanvi d\u2019informaci\u00f3 de manera segura. Utilitza encriptaci\u00f3 i criptografia de clau p\u00fablica per tal de fer l\u2019autenticaci\u00f3 de l\u2019estaci\u00f3 remota.</p> <p>Una de les funcions m\u00e9s emprades \u00e9s iniciar una sessi\u00f3 remota per tal d\u2019executar ordres. Per\u00f2 les seves capacitats s\u00f3n m\u00e9s \u00e0mplies, ja que tamb\u00e9 permet:</p> <ul> <li>Transmetre fitxers de manera segura.</li> <li>Fer t\u00fanels per assegurar qualsevol servei que no es transmeti encriptat (HTTP, SMTP, VNC, etc.) o per travessar tallafocs que estiguin bloquejant el protocol.</li> <li>Reenviament autom\u00e0tic de sessions X11.</li> <li>Fins i tot, en fer servir SSHFS, actuar com a sistema de fitxers en xarxa.</li> </ul> <p>Les seves possibilitats es poden combinar de moltes maneres diferents. Donades les seves capacitats criptogr\u00e0fiques, SSH \u00e9s una eina fonamental per a l\u2019administrador de xarxa.</p>"},{"location":"SMX2-SXA-2/#com-funciona-lencriptacio-en-ssh","title":"Com funciona l'encriptaci\u00f3 en SSH","text":"<p>El protocol SSH empra un model client-servidor per autenticar les dues parts i xifrar les dades entre ells.</p> <p>El servidor escolta en un port designat per a les connexions. \u00c9s responsable de la negociaci\u00f3 de la connexi\u00f3 segura, l'autenticaci\u00f3, i preparar l'entorn si s'accepten les credencials.</p> <p>El client \u00e9s responsable de comen\u00e7ar la connexi\u00f3 inicial de TCP amb el servidor, de negociar de la connexi\u00f3 segura, de verificar que la identitat del servidor coincideix amb la informaci\u00f3 pr\u00e8viament gravada, i de proporcionar credencials per autenticar-se.</p> <p>Una sessi\u00f3 SSH s'estableix en dues etapes separades. La primera \u00e9s la d'aprovar i establir el xifrat per a protegir les comunicacions futures. La segona etapa \u00e9s per autenticar a l'usuari.</p>"},{"location":"SMX2-SXA-2/#la-negociacio-del-xifrat-per-a-la-sessio-ssh","title":"La negociaci\u00f3 del xifrat  per a la sessi\u00f3 SSH","text":"<p>Quan un client es connecta, el servidor respon amb les versions de protocol que suporta. Si el client accepta alguna de les versions de protocol suportades, la connexi\u00f3 continua. El servidor tamb\u00e9 proporciona la seva clau p\u00fablica, que el client pot utilitzar per comprovar si el servidor \u00e9s realment el que diu ser. En aquest punt, les dues parts negocien una clau de sessi\u00f3.</p> <p>La clau de sessi\u00f3 (sim\u00e8trica) ser\u00e0 utilitzada per xifrar tota la sessi\u00f3. Els parells de claus p\u00fabliques i privades que s'utilitzen en aquesta negociaci\u00f3 s\u00f3n totalment independents de les claus SSH utilitzades per autenticar un client al servidor. Aquestes claus p\u00fabliques s'usaran per a compartir la clau de sessi\u00f3 creada i per a xifrar totes de les comunicacions que es duguen a terme durant la sessi\u00f3.</p> <p></p>"},{"location":"SMX2-SXA-2/#metodes-dautenticacio-del-servei-ssh","title":"M\u00e8todes d'autenticaci\u00f3 del servei SSH","text":"<p>L\u2019autenticaci\u00f3 \u00e9s l\u2019acci\u00f3 de comprovar la identitat del remitent en una comunicaci\u00f3. El servidor SSH, en rebre una sol\u00b7licitud de connexi\u00f3 nova, necessita autenticar l\u2019origen d\u2019aquesta connexi\u00f3 com a pas previ per autoritzar o denegar la connexi\u00f3.</p> <p>El servidor SSH pot emprar  diversos mecanismes diferents d\u2019autenticaci\u00f3. Entre aquests mecanismes destaquem, per ordre de prefer\u00e8ncia:</p> <ol> <li>Autenticaci\u00f3 basada en l\u2019amfitri\u00f3</li> <li>Autenticaci\u00f3 de clau p\u00fablica</li> <li>Autenticaci\u00f3 desafiament-resposta</li> <li>Autenticaci\u00f3 basada en la contrasenya</li> </ol> <p>\u00c9s molt important aclarir que abans de l\u2019autenticaci\u00f3, tant a SSH1 com a SSH2, s\u2019establir\u00e0 una comunicaci\u00f3 encriptada entre el client i el servidor. Per establir aquesta connexi\u00f3 encriptada es fan servir t\u00e8cniques criptogr\u00e0fiques de clau p\u00fablica. Una vegada acordada una clau comuna s\u2019utilitzar\u00e0 una encriptaci\u00f3 sim\u00e8trica per a la resta de la sessi\u00f3.</p>"},{"location":"SMX2-SXA-2/#autenticacio-basada-en-lamfitrio","title":"Autenticaci\u00f3 basada en l'amfitri\u00f3","text":"<p>Aquesta \u00e9s la t\u00e8cnica m\u00e9s segura, impedeix els atacs basats en la suplantaci\u00f3 d\u2019adreces IP, de DNS i de la taula de rutes.</p> <p>SSH genera una parella de claus, p\u00fablica i privada, durant la seva instal\u00b7laci\u00f3 en cada equip. Aquestes claus identifiquen l\u2019estaci\u00f3 en qu\u00e8 s\u2019executa SSH, no els seus usuaris. S\u00f3n les anomenades claus d\u2019amfitri\u00f3 (host) i, si el compte de superusuari (root) no est\u00e0 comprom\u00e8s (\u00e9s a dir, si ning\u00fa no s\u2019ha convertit en superusuari de manera fraudulenta), no \u00e9s necessari canviar-les.</p> <p>SSH2 pot emprar els algorismes RSA i DSA, mentre que SSH1 nom\u00e9s pot fer servir RSA.</p> <p>Per tal de que l\u2019autenticaci\u00f3 basada en l\u2019amfitri\u00f3 permeti a l\u2019usuari iniciar sessi\u00f3 mitjan\u00e7ant SSH, cal:</p> <ol> <li>Que el servidor pugui verificar la clau d\u2019amfitri\u00f3 del client. Aquesta verificaci\u00f3 es produeix si el servidor registra en el fitxer <code>known_hosts</code> la clau d\u2019amfitri\u00f3 p\u00fablica del client. (Aquest fitxer es troba a <code>/etc/SSH/SSH_known_hosts</code> per a tot el sistema o b\u00e9 a <code>.SSH/known_hosts</code> per a cada usuari).</li> <li>Que la m\u00e0quina que inicia la connexi\u00f3 estigui llistada en el fitxer <code>/etc/SSH/shosts.equiv</code> (o la seva versi\u00f3 insegura <code>/etc/hosts.equiv</code>) i el nom d\u2019usuari en l\u2019estaci\u00f3 client i en el servidor sigui el mateix. O b\u00e9 que en servidor, en el directori de l\u2019usuari que intenta iniciar sessi\u00f3, hi hagi el fitxer <code>.shosts</code> (o la seva versi\u00f3 insegura <code>.rhosts</code>), en qu\u00e8 apareguin la m\u00e0quina client i el nom d\u2019usuari en aquella estaci\u00f3.</li> </ol>"},{"location":"SMX2-SXA-2/#autenticacio-de-clau-publica","title":"Autenticaci\u00f3 de clau p\u00fablica","text":"<p>Aquest sistema es basa, com el seu nom indica, en t\u00e8cniques criptogr\u00e0fiques de clau p\u00fablica en qu\u00e8 el que s'encripta mitjan\u00e7ant la clau p\u00fablica nom\u00e9s es pot desencriptar mitjan\u00e7ant la clau privada associada, i en qu\u00e8 la clau privada es pot emprar per signar els missatges per tal que el receptor pugui autenticar l'emissor.</p> <p>Cal que l'usuari que vol iniciar una sessi\u00f3 remota al servidor constru\u00efsca una parella de claus, normalment fent \u00fas de l'eina <code>SSH-keygen</code>. Aquestes claus s'emmagatzemaran en el directori <code>/.SSH/</code> (en els fitxers <code>id_rsa/id_rsa.pub, id_dsa/id_dsa.pub</code> per a SSH2 o b\u00e9 <code>identity/identity.pub</code> per a SSH1).</p> <p>En construir la parella de claus, l\u2019eina <code>SSH-keygen</code> ens permetr\u00e0 definir si volem emprar una clau RSA o DSA. Tamb\u00e9 ser\u00e0 possible protegir les claus mitjan\u00e7ant un mot de pas que ser\u00e0 necessari escriure per desbloquejar la clau i poder emprar-la. De fet, aquesta \u00e9s una opci\u00f3 molt recomanable; nom\u00e9s es deixaran claus sense protegir si es tracta de les claus d'amfitri\u00f3 o b\u00e9 si es vol iniciar sessi\u00f3 de manera automatitzada (mitjan\u00e7ant scripts) sense que sigui necess\u00e0ria la intervenci\u00f3 de l'usuari per desbloquejar les claus.</p> <p>Una vegada s'han generat les claus ser\u00e0 necessari transportar la clau p\u00fablica a l'estaci\u00f3 en qu\u00e8 es vol iniciar sessi\u00f3 i afegir-la al fitxer <code>.SSH/authorized_keys</code> de l'usuari corresponent.</p> <p>A partir d'aquest moment l'usuari podr\u00e0 iniciar una sessi\u00f3 SSH sense haver d'especificar la seva contrasenya. Per\u00f2 si ha especificat una frase de pas per bloquejar les claus, encara ser\u00e0 necessari introduir-la per poder fer servir les claus.</p> <p>RSA i DSA</p> <p>S\u00f3n dos algorismes que fan servir l\u2019encriptaci\u00f3 de clau p\u00fablica.RSA s\u00f3n les inicials dels investigadors que van desenvolupar l\u2019algorisme: Ron Rivest, Adi Shamir i Leonard Adleman.DSA s\u00f3n les sigles dedigital signature algorithm, \u00e9s a dir, algoritme de signatura digital.</p> <p>Fitxer <code>known_hosts</code></p> <p>Quan un client SSH estableix una connexi\u00f3 per primera vegada amb un amfitri\u00f3, enregistra en fitxer known_hosts la clau p\u00fablica de l\u2019estaci\u00f3. La propera vegada que s\u2019estableixi una connexi\u00f3 es comprovar\u00e0 aquesta clau p\u00fablica.</p> PR\u00c0CTICA 2: Connexi\u00f3 SSH i transfer\u00e8ncia d'arxius <p>L'objectiu d'aquesta pr\u00e0ctica \u00e9s aprendre a:</p> <ul> <li>Configurar SSH en un Ubuntu Server.</li> <li>Comunicar-se per SSH amb la m\u00e0quina Ubuntu Server.</li> <li>Utilitzar PuTTY en Windows per establir una connexi\u00f3 SSH al servidor Ubuntu.</li> <li>Instal\u00b7lar i utilitzar FileZilla en Windows per a realitzar transfer\u00e8ncies SFTP entre client (Windows 11) i servidor (Ubuntu Server 24).</li> </ul> <p>Seguiu les instruccions seg\u00fcents per fer l'activitat.</p> <ol> <li> <p>Instal\u00b7leu el programa servidor SSH: <code>openssh-server</code> en el Ubuntu Server. Creeu tamb\u00e9 un usuari <code>remote_user</code> al servidor.</p> </li> <li> <p>Comproveu el funcionament dels serveis.</p> </li> <li> <p>Instal\u00b7leu els programaes PuTTY i FileZilla en el Client Windows. Descarregueu tamb\u00e9 una imatge jpg.</p> </li> <li> <p>Des del client Windows connecteu per SSH al Server (usuari <code>remote_user</code>) i creeu un fitxer de &gt; 4MB anomenat <code>fitxer_server_nomAlumne</code></p> </li> <li> <p>Des del client Windows connecteu amb FileZilla al Server (usuari <code>remote_user</code>) i intercanvieu els fitxers: al server estar\u00e0 la imatge descarregada i al client estar\u00e0 el fitxer del servidor.</p> </li> </ol> <p>Documenta el proc\u00e9s amb captures i comentaris.</p>"},{"location":"SMX2-SXA-2/#tansferencia-segura-darxius-scp","title":"Tansfer\u00e8ncia segura d'arxius - scp","text":"<p>Funciona d'igual forma que la comanda <code>cp</code> que s'empra per copiar en local, per\u00f2 de forma remota. La sintaxi b\u00e0sica del comandament <code>scp</code> \u00e9s la seg\u00fcent:</p> scp (Secure Copy)<pre><code>scp [opcions] [usuari@]host:fitxer_origen [usuari@]host:fitxer_dest\u00ed\n</code></pre> Exemples d'\u00fas <p>Copiar un fitxer des de la m\u00e0quina local a una m\u00e0quina remota:</p> Bash<pre><code>scp fitxer_local.txt usuari@host_remot:/ruta/dest\u00ed/\n</code></pre> <p>Copiar un fitxer des d'una m\u00e0quina remota a la m\u00e0quina local:</p> Bash<pre><code>scp usuari@host_remot:/ruta/origen/fitxer_remot.txt /ruta/dest\u00ed/\n</code></pre> <p>Copiar un directori de manera recursiva des de la m\u00e0quina local a una m\u00e0quina remota:</p> Bash<pre><code>scp -r directori_local/ usuari@host_remot:/ruta/dest\u00ed/\n</code></pre> <p>Copiar un fitxer entre dues m\u00e0quines remotes:</p> Bash<pre><code>scp usuari1@host_remot1:/ruta/origen/fitxer.txt usuari2@host_remot2:/ruta/dest\u00ed/\n</code></pre> <p>Copiar un fitxer especificant un port SSH diferent:</p> Bash<pre><code>scp -P 2222 fitxer_local.txt usuari@host_remot:/ruta/dest\u00ed/\n</code></pre> <p>Copiar un fitxer amb compressi\u00f3 durant la transfer\u00e8ncia:</p> Bash<pre><code>scp -C fitxer_local.txt usuari@host_remot:/ruta/dest\u00ed/\n</code></pre> <p>Copiar un fitxer amb una velocitat de transfer\u00e8ncia limitada:</p> Bash<pre><code>scp -l 1000 fitxer_local.txt usuari@host_remot:/ruta/dest\u00ed/\n</code></pre> ACTIVITAT 3: Copia remota amb scp <p>Tota l'activitat s'ha de fer des d'un client Lubuntu, loguejat com a <code>remote_user</code>. El Server DHCP ha d'estar en marxa, per\u00f2 no es pot accedir a ell. Fes el seg\u00fcent:</p> <ol> <li>Crea les carpetes ENVIAR i REBRE a l'escriptori del client (Recorda, usuari <code>remote_user</code>).</li> <li>Crea a la carpeta ENVIAR del client els fitxers <code>exemple.txt</code>, <code>examen.txt</code>, <code>document.pdf</code> i <code>exercici.pdf</code>. Aquests fitxers no han de tindre m\u00e9s de 10MB. Pots fer \u00fas de la comanda <code>fallocate</code>. Crea tamb\u00e9 un fitxer anomenat <code>mitja</code> de 50MB de tamany i altre fitxer <code>gran</code> de 200MB de tamany.</li> <li>Crea la carpeta REPOS al directori <code>/home/remote_user</code> del servidor.</li> <li>Crea els fitxers <code>server1.txt</code> i <code>server2.txt</code> dins de la carpeta REPOS.</li> <li>Copia els fitxers, d'un en un, amb scp entre el client i el servidor: de la carpeta ENVIAR a REPOS i de REPOS a REBRE.</li> </ol> <p>Documenta tot el proc\u00e9s.</p>"},{"location":"SMX2-SXA-2/#sincronitzacio-de-directoris-amb-rsync","title":"Sincronitzaci\u00f3 de directoris amb rsync","text":"<p>La comanda <code>rsync</code> \u00e9s una eina poderosa per a la sincronitzaci\u00f3 de fitxers i directoris entre diferents ubicacions, ja siga en la mateixa m\u00e0quina o entre m\u00e0quines remotes. La seva sintaxi b\u00e0sica \u00e9s la seg\u00fcent:</p> Bash<pre><code>rsync [opcions] [origen] [dest\u00ed]\n</code></pre> <p>Opcions comunes</p> <ul> <li><code>-a</code> o <code>--archive</code>: Mode arxiu; \u00e9s equivalent a <code>-rlptgoD</code> (recursiu, enlla\u00e7os, permisos, temps, grup, propietari, dispositius).</li> <li><code>-v</code> o <code>--verbose</code>: Mostra informaci\u00f3 detallada del proc\u00e9s.</li> <li><code>-z</code> o <code>--compress</code>: Comprimeix els fitxers durant la transfer\u00e8ncia.</li> <li><code>-P</code>: Mostra el progr\u00e9s de la transfer\u00e8ncia i permet reprendre transfer\u00e8ncies interrompudes.</li> <li><code>--delete</code>: Elimina els fitxers del dest\u00ed que no existeixen en l'origen.</li> <li><code>-e ssh</code>: Utilitza SSH per a la transfer\u00e8ncia de dades.</li> </ul> Exemples d'\u00fas <p>Sincronitzar un directori local amb un altre directori local:</p> Bash<pre><code>rsync -av /ruta/origen/ /ruta/desti/\n</code></pre> <p>Sincronitzar un directori local amb un directori remot:</p> Bash<pre><code>rsync -av -e ssh /ruta/origen/ usuari@host_remot:/ruta/desti/\n</code></pre> <p>Sincronitzar un directori remot amb un directori local:</p> Bash<pre><code>rsync -av -e ssh usuari@host_remot:/ruta/origen/ /ruta/desti/\n</code></pre> <p>Sincronitzar un directori local amb un directori remot i eliminar fitxers que no existeixen en l'origen:</p> Bash<pre><code>rsync -av --delete -e ssh /ruta/origen/ usuari@host_remot:/ruta/desti/\n</code></pre> <p>Sincronitzar un directori local amb un directori remot amb compressi\u00f3:</p> Bash<pre><code>rsync -avz -e ssh /ruta/origen/ usuari@host_remot:/ruta/desti/\n</code></pre> <p>Sincronitzar un directori local amb un directori remot mostrant el progr\u00e9s:</p> Bash<pre><code>rsync -avP -e ssh /ruta/origen/ usuari@host_remot:/ruta/desti/\n</code></pre> ACTIVITAT 4: Sincronitzaci\u00f3 amb rsync <p>L'objectiu d'aquesta pr\u00e0ctica \u00e9s aprendre a utilitzar <code>rsync</code> per sincronitzar fitxers i directoris entre un client i un servidor.</p> <p>Seguiu les instruccions seg\u00fcents per fer l'activitat.</p> <ol> <li>Creeu un directori <code>sync_origen</code> al client i afegiu alguns fitxers de text.</li> <li>Creeu un directori <code>sync_desti</code> al servidor.</li> <li>Utilitzeu <code>rsync</code> per sincronitzar el directori <code>sync_origen</code> del client amb el directori <code>sync_desti</code> del servidor.</li> <li>Afegiu nous fitxers al directori <code>sync_origen</code> i torneu a executar <code>rsync</code> per veure com es sincronitzen els canvis.</li> </ol> <p>Documenta el proc\u00e9s amb captures i comentaris.</p>"},{"location":"SMX2-SXA-Pr%C3%A0ctiques/","title":"Manuals","text":"<ul> <li>Canvi Mirror Ubuntu</li> </ul>"},{"location":"SMX2-SXA-Pr%C3%A0ctiques/#practiques-resoltes","title":"Pr\u00e0ctiques resoltes","text":"<ul> <li>UD1:<ul> <li>NAT</li> </ul> </li> <li>UD2:<ul> <li>Telnet</li> <li>SSH</li> </ul> </li> </ul>"}]}