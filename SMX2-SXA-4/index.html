
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Paco Galera & Javier Beteta">
      
      
        <link rel="canonical" href="https://pgalera.github.io/sxa/SMX2-SXA-4/">
      
      
        <link rel="prev" href="../SMX2-SXA-3/">
      
      
        <link rel="next" href="../SMX2-SXA-5/">
      
      
      <link rel="icon" href="../img/logojaume.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.33">
    
    
      
        <title>UD4. El servei DNS - Serveis en Xarxa</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-GJ8MB56SLW"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-GJ8MB56SLW",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-GJ8MB56SLW",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="UD4. El servei DNS - Serveis en Xarxa" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://pgalera.github.io/sxa/assets/images/social/SMX2-SXA-4.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://pgalera.github.io/sxa/SMX2-SXA-4/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="UD4. El servei DNS - Serveis en Xarxa" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://pgalera.github.io/sxa/assets/images/social/SMX2-SXA-4.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#-" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="CapÃ§alera">
    <a href=".." title="Serveis en Xarxa" class="md-header__button md-logo" aria-label="Serveis en Xarxa" data-md-component="logo">
      
  <img src="../img/logojaume.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Serveis en Xarxa
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UD4. El servei DNS
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Mode oscur"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Mode oscur" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="Mode clar"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Mode clar" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="NavegaciÃ³" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Serveis en Xarxa" class="md-nav__button md-logo" aria-label="Serveis en Xarxa" data-md-component="logo">
      
  <img src="../img/logojaume.png" alt="logo">

    </a>
    Serveis en Xarxa
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SMX2-SXA-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD1. InterconnexiÃ³ de xarxes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SMX2-SXA-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD2. AccÃ©s remot
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SMX2-SXA-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD3. El servei DHCP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    UD4. El servei DNS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    UD4. El servei DNS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      ---
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolucio-de-noms" class="md-nav__link">
    <span class="md-ellipsis">
      ResoluciÃ³ de noms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ResoluciÃ³ de noms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servidors-arrel" class="md-nav__link">
    <span class="md-ellipsis">
      Servidors arrel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-protocol-dns" class="md-nav__link">
    <span class="md-ellipsis">
      El protocol DNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipus-de-registres" class="md-nav__link">
    <span class="md-ellipsis">
      Tipus de registres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tipus de registres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-de-dades-de-zona" class="md-nav__link">
    <span class="md-ellipsis">
      Base de dades de zona
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-soa" class="md-nav__link">
    <span class="md-ellipsis">
      Registre SOA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-ns" class="md-nav__link">
    <span class="md-ellipsis">
      Registre NS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-a-o-aaa" class="md-nav__link">
    <span class="md-ellipsis">
      Registre A o AAA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-cname" class="md-nav__link">
    <span class="md-ellipsis">
      Registre CNAME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#altres-registres" class="md-nav__link">
    <span class="md-ellipsis">
      Altres registres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Altres registres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registre-mx" class="md-nav__link">
    <span class="md-ellipsis">
      Registre MX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resgistre-ptr" class="md-nav__link">
    <span class="md-ellipsis">
      Resgistre PTR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#altres" class="md-nav__link">
    <span class="md-ellipsis">
      Altres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolucio-del-protocol-i-seguretat" class="md-nav__link">
    <span class="md-ellipsis">
      EvoluciÃ³ del protocol i seguretat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapa-conceptual" class="md-nav__link">
    <span class="md-ellipsis">
      Mapa conceptual
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activitats-i-practiques" class="md-nav__link">
    <span class="md-ellipsis">
      Activitats i PrÃ ctiques
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annex-i-dig-amb-trace" class="md-nav__link">
    <span class="md-ellipsis">
      Annex I: dig amb +trace
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SMX2-SXA-5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD5. El servei HTTP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../SMX2-SXA-7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UD7. Proxy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Manuals
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Manuals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manuals/CanviMirror/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Canvi de Mirror en Ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manuals/ManUbuntuServerDocker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker en Ubuntu Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manuals/ManSolMachine_id/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DuplicaciÃ³ Machine-id
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PrÃ ctiques
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            PrÃ ctiques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac1NAT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servei NAT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac2Telnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servei Telnet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac3SSH/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servei SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac5VHostApache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servidor Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac5VHostNginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servidor nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practiques/Prac5Autenticacio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AutenticaciÃ³ Apache
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Taula de continguts">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      ---
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolucio-de-noms" class="md-nav__link">
    <span class="md-ellipsis">
      ResoluciÃ³ de noms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ResoluciÃ³ de noms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#servidors-arrel" class="md-nav__link">
    <span class="md-ellipsis">
      Servidors arrel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#el-protocol-dns" class="md-nav__link">
    <span class="md-ellipsis">
      El protocol DNS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipus-de-registres" class="md-nav__link">
    <span class="md-ellipsis">
      Tipus de registres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tipus de registres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-de-dades-de-zona" class="md-nav__link">
    <span class="md-ellipsis">
      Base de dades de zona
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-soa" class="md-nav__link">
    <span class="md-ellipsis">
      Registre SOA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-ns" class="md-nav__link">
    <span class="md-ellipsis">
      Registre NS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-a-o-aaa" class="md-nav__link">
    <span class="md-ellipsis">
      Registre A o AAA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registre-cname" class="md-nav__link">
    <span class="md-ellipsis">
      Registre CNAME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#altres-registres" class="md-nav__link">
    <span class="md-ellipsis">
      Altres registres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Altres registres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registre-mx" class="md-nav__link">
    <span class="md-ellipsis">
      Registre MX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resgistre-ptr" class="md-nav__link">
    <span class="md-ellipsis">
      Resgistre PTR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#altres" class="md-nav__link">
    <span class="md-ellipsis">
      Altres
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolucio-del-protocol-i-seguretat" class="md-nav__link">
    <span class="md-ellipsis">
      EvoluciÃ³ del protocol i seguretat
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapa-conceptual" class="md-nav__link">
    <span class="md-ellipsis">
      Mapa conceptual
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activitats-i-practiques" class="md-nav__link">
    <span class="md-ellipsis">
      Activitats i PrÃ ctiques
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annex-i-dig-amb-trace" class="md-nav__link">
    <span class="md-ellipsis">
      Annex I: dig amb +trace
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>UD4. El servei DNS</h1>

<h2 id="-">---</h2>
<p>subtitle: 2SMX - SXA---
lang: catambÃ© un altre tipus de servidors, <strong>els servidors DNS cachÃ©</strong> (cau). Els servidors DNS cachÃ© sols atenen consultes dels clients DNS sobre noms de domini. No contÃ© cap informaciÃ³ sobre la zona i la seua utilitat principal Ã©s accelerar les consultes.</p>
<h2 id="resolucio-de-noms">ResoluciÃ³ de noms</h2>
<p>Tot sovint en les aplicacions d'usuari i de sistema s'accedeix a recursos pel seu nom de domini. Per exemple, un client web requereix una determinada pÃ gina web, un navegador de fitxers vol accedir a unes carpetes d'una mÃ quina remota que s'identifiquen pel nom de domini, el sistema ha de validar l'usuari contra un servidor LDAP remot, etc. En cada un d'aquests casos caldrÃ  resoldre una pregunta del tipus <em>aquest domini a quina adreÃ§a IP correspon?</em> Aquesta pregunta no la responen les aplicacions individualment (el navegador web, el client d'autenticaciÃ³...), sinÃ³ que utilitzen el <em>resolver</em> per fer-ho.</p>
<p>El <em>resolver</em> Ã©s la part client de l'arquitectura client-servidor del DNS. Ell ha d'atendre les necessitats de les aplicacions, confeccionar una consulta o query, fer-la a un servidor DNS, obtenir la resposta i passar-la a l'aplicaciÃ³ pertinent.</p>
<p><strong>LA RESOLUCIÃ</strong></p>
<p>El mecanisme de resoluciÃ³ de noms DNS consta d'un client o <em>resolver</em> que realitzarÃ  les consultes (o <em>querys</em>) a resoldre a uns servidors DNS.</p>
<p>Si el servidor disposa de la informaciÃ³ perquÃ¨ forma part de la base de dades de la seva zona, emetrÃ  una resposta <strong>autoritativa</strong>. Si disposa de la resposta perquÃ¨ la tÃ© emmagatzemada temporalment (en un procÃ©s anomenat <em>cache</em>) tambÃ© emetrÃ  la resposta perÃ² aquest cop de manera <strong>no autoritativa</strong>. Si no tÃ© informaciÃ³ del domini buscat, el servidor pot fer a altres servidors la mateixa consulta en un procÃ©s que pot ser recursiu o iteratiu. Sempre existeix un camÃ­ per trobar el domini buscat, que Ã©s preguntar als nodes arrel (<em>root servers</em>) de l'espai de noms de domini. Partint dels nodes arrel i recorrent l'arbre cap avall, es pot arribar al domini buscat, si Ã©s que existeix.</p>
<p>Sempre hi ha un camÃ­ a un domini existent partint del node arrel. Quan un servidor Ã©s consultat sobre un domini que desconeix (no Ã©s de la seva zona ni tÃ© la resposta en la <em>cache</em>) pot escalar la pregunta a un servidor de l'arrel (<em>root name server</em>). AixÃ² significa que els servidors arrel sÃ³n crucials per al funcionament del DNS.</p>
<details class="question">
<summary>Consulta iterativa</summary>
<p>MitjanÃ§ant l'eina de consulta DNS <code>dig</code> amb les opcions <code>@servidordns</code> i <code>+trace</code> realitza la consulta del domini <strong>wikipedia.org</strong> substituint <code>servidordns</code> per 3 servidors diferents (8.8.8.8, 1.1.1.1, Servidor DNS local).</p>
<p>Determina la seqÃ¼Ã¨ncia de les consultes realitzades en els tres casos i compara-les.</p>
<p>Sempre consulta els mateixos servidors? Per quÃ¨? Quina ha estat mÃ©s rÃ pida? Justifica les respostes.</p>
</details>
<h3 id="servidors-arrel">Servidors arrel</h3>
<p>Un servidor arrel de noms Ã©s un servidor de noms que respon directament les peticions de registres de la <strong>zona arrel</strong> i respon altres consultes tornant una llista de servidors acreditats de noms del domini de primer nivell adient (TLD). Els servidors arrel de noms sÃ³n una part crÃ­tica de la infraestructura de l'Internet, ja que sÃ³n el primer pas en la traducciÃ³ (resoluciÃ³) dels noms de servidors entenedors pels humans en adreces IP que s'utilitzen entre amfitrions d'Internet.</p>
<p>Actualment disposem de 13 servidors arrels.</p>
<div class="admonition info">
<p class="admonition-title">Consulta servidors arrel</p>
<p>L'execuciÃ³ del comandament <code>dig</code> sense parÃ metres ens torna la llista completa de servidors arrel.</p>
</div>
<h3 id="el-protocol-dns">El protocol DNS</h3>
<p>El servei de noms de domini utilitza el protocol DNS per fer les consultes i les respostes. Es tracta d'un protocol de capa d'aplicaciÃ³ que pot utilitzar tant UDP com TCP en la capa de transport. Usualment, tant les consultes del client com les respostes del servidor es poden encabir en un datagrama (512 bytes) i s'utilitza UDP (de fet, generalment es diu que el DNS usa UDP). PerÃ² si la informaciÃ³ a transmetre Ã©s Ã mplia (per exemple, una resposta amb una llista amb molta informaciÃ³), la comunicaciÃ³ es passa a TCP automÃ ticament. Un altre cas en quÃ¨ la informaciÃ³ Ã©s TCP Ã©s quan es realitza la <strong>transferÃ¨ncia d'informaciÃ³ d'una zona</strong> entre servidors primaris i secundaris. El servidor DNS utilitza el port privilegiat 53.</p>
<p>El <strong>protocol DNS</strong> Ã©s usualment UDP, perÃ² pot ser <strong>TCP</strong> i <strong>UDP</strong>. Es tracta d'un protocol de capa d'aplicaciÃ³ i utilitza el <strong>port 53</strong>.</p>
<p>La comunicaciÃ³ DNS Ã©s un mecanisme de consulta/resposta entre el client i el servidor. Els datagrames, doncs, seran de <em>query</em> (consulta) o <em>answer</em> (resposta).</p>
<p>Els apartats que componen un missatge DNS sÃ³n:</p>
<ul>
<li><strong>HEADER</strong>. CapÃ§alera del missatge indicant si Ã©s una consulta o una resposta. ContÃ© l'id (identificador) del missatge, flags i un resum de quines seccions del missatge porten informaciÃ³ i quanta.</li>
<li><strong>QUESTION</strong>. Aquesta secciÃ³ contÃ© la consulta que s'ha efectuat. Ãs a dir, quina dada s'ha demanat al servidor. Pot ser una resoluciÃ³ d'adreÃ§a IP a un domini, demanar la llista de servidors d'impressiÃ³, etc.</li>
<li><strong>ANSWER</strong>. SecciÃ³ que contÃ© la resposta obtinguda del servidor. S'entÃ©n que aquesta secciÃ³ contÃ© la resposta no autoritativa. A vegades en les utilitats de consulta aquesta secciÃ³ es mostra com a non-autority answer.</li>
<li><strong>AUTHORITY</strong>. Aquesta secciÃ³ contÃ© les respostes que sÃ³n autoritatives per a la consulta efectuada. Evidentment pot ser buida.</li>
<li><strong>ADDITIONAL</strong>. ContÃ© informaciÃ³ addicional per completar la resposta. En l'exemple s'observa que completa la resoluciÃ³ dels noms de mÃ quina que hi ha a la secciÃ³ answer tot indicant la seva adreÃ§a IP corresponent.</li>
</ul>
<h2 id="tipus-de-registres">Tipus de registres</h2>
<p>El sistema de noms de domini Ã©s una base de dades jerÃ rquica i distribuÃ¯da en quÃ¨ cada servidor de noms gestiona la informaciÃ³ corresponent a la zona de la qual Ã©s autoritari. Cada zona contÃ© informaciÃ³ dels hosts que la formen. La informaciÃ³ de zona s'emmagatzema en forma de registre de recurs o <em>resource record</em> (RR). Hi ha la informaciÃ³ que permet identificar cada nom de domini amb l'adreÃ§a IP corresponent, anomenat <em>forward mapping</em> o resoluciÃ³ directa. TambÃ© contÃ© la informaciÃ³ per identificar cada adreÃ§a IP amb el nom de domini corresponent, anomenat <em>reverse mapping</em> o resoluciÃ³ inversa. La informaciÃ³ de zones contÃ© altres informacions que permeten identificar els servidors DNS autoritaris per la zona, els servidors de correu, etc.</p>
<h3 id="base-de-dades-de-zona">Base de dades de zona</h3>
<p>La configuraciÃ³ d'una zona s'emmagatzema en un conjunt de fitxers anomenat <strong>fitxers de zona</strong>. L'especificaciÃ³ del DNS diu com han de ser aquests fitxers de zona i com s'hi han de descriure els registres de recurs (descripciÃ³ de cada element que pertany a la zona).</p>
<h3 id="registre-soa">Registre SOA</h3>
<p>El registre de recurs SOA o <em>start of authority</em> (inici de definiciÃ³ de zona amb autoritat) diu que el fitxer de zona on es troba Ã©s la millor font de dades per a la zona, que el servidor de noms Ã©s autoritari per a la zona. Acostuma a ser el primer RR que hi ha en el fitxer de zona, tot i que no Ã©s obligatori. Per cada fitxer de zona hi ha d'haver nomÃ©s un registre SOA.</p>
<h3 id="registre-ns">Registre NS</h3>
<p>El registre de recurs NS o <em>name server</em> (servidor de noms) defineix un servidor de noms autoritatiu per a la zona. Hi haurÃ  tantes entrades NS com servidors de noms autoritatius hi ha en la zona. L'estÃ ndard DNS en recomana almenys dos (un de primari o <em>master</em> i un de seguretat secundari o <em>slave</em>).</p>
<h3 id="registre-a-o-aaa">Registre A o AAA</h3>
<p>Un registre de recurs A o <em>address</em> (adreÃ§a) associa un nom de host a una adreÃ§a IP (resoluciÃ³ directa). Per cada nom de host de la xarxa caldrÃ  disposar d'una entrada on s'associÃ¯ el nom del host a la seva adreÃ§a IP.</p>
<h3 id="registre-cname">Registre CNAME</h3>
<p>Els registres de recurs CNAME o <em>canonical name</em> (nom canÃ²nic) associen un Ã lies a un nom canÃ²nic.</p>
<h3 id="altres-registres">Altres registres</h3>
<h4 id="registre-mx">Registre MX</h4>
<p>Un registre MX <em>mail echanger</em> (servidor de correu electrÃ²nic) defineix un servidor de correu. Es pot posar una entrada MX per a cada servidor de correu, perÃ² no Ã©s obligatori que n'hi hagi cap.</p>
<h4 id="resgistre-ptr">Resgistre PTR</h4>
<p>Un registre de recurs PTR o <em>pointer</em> (punter) associa una adreÃ§a IP al nom de host pertinent (resoluciÃ³ inversa). Cal una entrada PTR per a cada interfÃ­cie de xarxa de la zona.</p>
<h4 id="altres">Altres</h4>
<p>Hi ha altres tipus de registres de recurs que no sÃ³n tan utilitzats i que es mencionen a continuaciÃ³:</p>
<ul>
<li>HINFO: (Host Information) informaciÃ³ sobre el tipus d'ordinador.</li>
<li>MB: (Mail Box) informaciÃ³ sobre una bÃºstia de correu.</li>
<li>MG: (Mailgroup) informaciÃ³ sobre un grup de correu.</li>
<li>MR: nom nou d'una bÃºstia de correu.</li>
<li>WKS (Well Known Services) llista de serveis del host.</li>
<li>TXT: (Text) text descriptiu.</li>
<li>NULL: (Null) registre buit.</li>
<li>AAAA () corresponent a una adreÃ§a de host usant Ipv6.</li>
</ul>
<h2 id="evolucio-del-protocol-i-seguretat">EvoluciÃ³ del protocol i seguretat</h2>
<p>Els protocols DNS han evolucionat molt grÃ cies a les noves necessitats provocades per l'increment exponencial de les xarxes. Una de les principals vies en evoluciÃ³ Ã©s el DDNS o dinÃ mic DNS i el DNSSEC o DNS segur.</p>
<p><strong>DDNS</strong></p>
<p>El protocol DDNS (<em>dynamic DNS</em>) permet que les dades del servidor DNS s'actualitzin en temps real. El principal Ãºs Ã©s permetre que clients amb adreces IP dinÃ miques d'interval puguin disposar d'un nom de domini (a pesar que la seva adreÃ§a IP varia d'una sessiÃ³ a una altra). Un mecanisme consisteix a permetre que els servidors DHCP es comuniquin amb els servidors DNS i els notifiquin les actualitzacions a la base de dades de DNS que cal fer. En funciÃ³ de les configuracions de xarxa que els servidors DHCP proporcionen als seus clients es fan les actualitzacions al DNS.</p>
<p><strong>DNSSEC</strong></p>
<div class="admonition info">
<p class="admonition-title">Man in the middle</p>
<p>S'anomena <em>man-in-the-middle</em> aquells equips que es fan passar per altres en una connexiÃ³ de xarxa. El client creu connectar amb el seu banc, perÃ² de fet estÃ  connectant amb un "atacant" situat entremig. Aquest atacant rep el trÃ nsit del client i el transfereix al banc, rep la resposta del banc i la passa al client. En aquest procÃ©s estÃ  en disposiciÃ³ de "manipular" tot aquest trÃ nsit a la seva conveniÃ¨ncia.</p>
</div>
<p>DNSSEC o <em>Domain Name System Security Extensions</em> (extensions de seguretat per a DNS) sÃ³n un conjunt d'especificacions de seguretat per permetre una comunicaciÃ³ DNS segura, de manera que el client pugui estar plenament segur que qui li respon les consultes Ã©s el seu servidor DNS i no un impostar (el <em>man-in-the-middle</em>). TambÃ© garanteix la integritat de les dades tant de les consultes com de les respostes i a mÃ©s a mÃ©s estÃ  dissenyat per prevenir atacs de denegaciÃ³ de servei.</p>
<p><strong>Servidors DNS enverinats</strong></p>
<p>Un dels principals problemes del protocol DNS (com de tots els primers protocols d'Internet) Ã©s la falta de seguretat. Va ser dissenyat en una Ã¨poca de 'bon rotllo' on es confiava amb els altres integrants de la xarxa. AixÃ² avui en dia no Ã©s massa sensat.</p>
<p>Imagineu que un atacant aconsegueix el control d'un servidor DNS o aconsegueix fer passar el seu servidor DNS fals com a servidor d'un conjunt d'usuaris. Cada vegada que aquests clients fan una consulta a Internet, per exemple al seu banc (posant el nom de la web), el servidor DNS enverinat proporciona una adreÃ§a IP no del banc real sinÃ³ d'una web falsa amb la finalitat de...</p>
<p>Cada cop que accedim a una web, un servei, un host, etc. per mitjÃ  del seu nom de domini, confiem que el servidor DNS proporcioni l'adreÃ§a IP correcta. Som confiats, eh?</p>
<h2 id="mapa-conceptual">Mapa conceptual</h2>
<p><center><img alt="Mapa conceptual - Servei DNS" src="../img/ud4/mapaConcetualDNS.png" /></center></p>
<p><center><em>Vicent JordÃ . Mapa conceptual - Servei DNS (CC BY-NC-SA)</em></center></p>
<h2 id="activitats-i-practiques">Activitats i PrÃ ctiques</h2>
<details class="question">
<summary>ButlletÃ­ d'activitats</summary>
<ol>
<li>Quina Ã©s la funciÃ³ principal del servei DNS?</li>
<li>Quines caracterÃ­stiques tÃ© el servei DNS?</li>
<li>Explica quÃ¨ sÃ³n els fitxers plans per a l'assignaciÃ³ de noms. On estan emmagatzemats?</li>
<li>Les bases de dades DNS es defineixen com jerarquitzades i distribuÃ¯des. Â¿QuÃ¨ signifiquen estos conceptes? Â¿Quina informaciÃ³ emmagatzemen?</li>
<li>Quins avantatges tÃ© l'Ãºs de servidors DNS locals respecte als externs.</li>
<li>Quins tipus de mecanismes de resoluciÃ³ de noms (consultes) existeixen? Explica el procÃ©s d'un d'ells. Ãs aconsellable recolzar-se en dibuixos i esquemes.</li>
<li>QuÃ¨ Ã©s l'espai de noms de domini? Com s'estructura? Pots fer dibuixos i esquemes.</li>
<li>QuÃ¨ Ã©s una zona? Quina relaciÃ³ tÃ© amb el concepte de delegaciÃ³?</li>
<li>QuÃ¨ vol dir que un servidor de noms Ã©s autoritatiu respecte a un domini? Quina diferÃ¨ncia hi ha entre un servidor primari i un secundari?</li>
<li>Nomena els tipus de registres que hi ha i quina utilitat tenen.</li>
<li>Busca la pÃ gina web de ICAAN i explica amb les teues paraules quina Ã©s la seua funciÃ³.</li>
<li>Explica amb les teues paraules com funciona un servidor cau (cachÃ©).</li>
</ol>
</details>
<details class="danger">
<summary>P1. ResoluciÃ³ de noms de dominim amb <code>nslookup</code></summary>
<p><code>nslookup</code> Ã©s una eina que permet fer consultes DNS per resoldre noms de domini i obtenir informaciÃ³ sobre els servidors DNS.</p>
<p><strong>ResoluciÃ³ bÃ sica d'un domini:</strong></p>
<ul>
<li>
<p>Obre una terminal i executa:
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>nslookup<span class="w"> </span>google.com
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>AnÃ lisi dels resultats: Observa com el nom de domini es resol en una adreÃ§a IP. L'IP Ã©s necessÃ ria perquÃ¨ els ordinadors puguin trobar els servidors web correctes. TambÃ© observa quin servidor DNS ha estat utilitzat per a la consulta.</p>
</li>
</ul>
<p><strong>Consulta de servidors de correu (MX records):</strong></p>
<ul>
<li>Els registres MX (Mail Exchange) indiquen els servidors responsables de gestionar el correu electrÃ²nic per un domini. Executa:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>nslookup<span class="w"> </span>-query<span class="o">=</span>mx<span class="w"> </span>gmail.com
</code></pre></div></td></tr></table></div>
<ul>
<li>AnÃ lisi dels resultats: Quins servidors sÃ³n els responsables de gestionar el correu de <code>gmail.com</code>?</li>
</ul>
<p><strong>Canvi de servidor DNS per a la consulta:</strong></p>
<p>Per defecte, <code>nslookup</code> utilitza el servidor DNS configurat en el sistema. Podem utilitzar altres servidors, com ara el DNS de Google (8.8.8.8):</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>nslookup<span class="w"> </span>google.com<span class="w"> </span><span class="m">8</span>.8.8.8
</code></pre></div></td></tr></table></div>
<ul>
<li>AnÃ lisi dels resultats: Comprova si els resultats sÃ³n diferents quan utilitzem un servidor DNS diferent.</li>
</ul>
</details>
<details class="danger">
<summary>P2. InvestigaciÃ³ de registres DNS amb <code>dig</code></summary>
<p><code>dig</code> (Domain Information Groper) Ã©s una eina potent per fer consultes DNS i obtenir informaciÃ³ detallada dels registres associats a un domini. Ãs especialment Ãºtil per a l'anÃ lisi de registres especÃ­fics.</p>
<p><strong>Consulta d'un domini:</strong></p>
<ul>
<li>Obre la terminal i executa:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>dig<span class="w"> </span>google.com
</code></pre></div></td></tr></table></div>
<ul>
<li>AnÃ lisi dels resultats: Analitza la informaciÃ³ de les seccions "Question Section" i "Answer Section". Quina IP retorna el servidor DNS?</li>
</ul>
<p><strong>Consulta de registres especÃ­fics:</strong></p>
<ul>
<li>Registres A (IPv4):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>dig<span class="w"> </span>google.com<span class="w"> </span>A
</code></pre></div></td></tr></table></div>
<ul>
<li>Registres MX (correu):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>dig<span class="w"> </span>gmail.com<span class="w"> </span>MX
</code></pre></div></td></tr></table></div>
<ul>
<li>Registres NS (servidors de noms):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>dig<span class="w"> </span>google.com<span class="w"> </span>NS
</code></pre></div></td></tr></table></div>
<ul>
<li>Registres TXT (informaciÃ³ textual):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>dig<span class="w"> </span>google.com<span class="w"> </span>TXT
</code></pre></div></td></tr></table></div>
<ul>
<li>AnÃ lisi dels resultats: Quins sÃ³n els resultats per a cada tipus de registre? Quins servidors de noms gestiona <code>google.com</code>? Quins servidors de correu s'associen a <code>gmail.com</code>?</li>
</ul>
<p><strong>Canvi de servidor DNS per a la consulta:</strong></p>
<ul>
<li>Executa la mateixa comanda utilitzant un servidor DNS diferent, com el de Cloudflare (1.1.1.1):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>dig<span class="w"> </span>google.com<span class="w"> </span>@1.1.1.1
</code></pre></div></td></tr></table></div>
<ul>
<li>AnÃ lisi dels resultats: Hi ha alguna diferÃ¨ncia en els resultats?</li>
</ul>
</details>
<!-- ???danger "P3. ResoluciÃ³ inversa d'IPs i TTL amb `host` i `ping`"

    La resoluciÃ³ inversa Ã©s el procÃ©s de convertir una adreÃ§a IP en un nom de domini. AixÃ² pot ser Ãºtil per identificar a qui pertany una adreÃ§a IP.

    TTL (*time to live*) Ã©s el temps que un registre DNS pot ser emmagatzemat en memÃ²ria cau (cache) abans de necessitar ser actualitzat. Com mÃ©s curt sigui el TTL, mÃ©s sovint es farÃ  la consulta al servidor DNS autoritatiu.

    La comanda `ping` mesura el temps que tarda un paquet de dades a viatjar des del teu ordinador fins a un servidor i tornar. Ãs una eina clau per mesurar la latÃ¨ncia i la connectivitat.

    **ResoluciÃ³ inversa amb `host`:**

    - Utilitza la comanda `host` per veure quin domini estÃ  associat a una adreÃ§a IP, per exemple, la de Google DNS:

     <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>host<span class="w"> </span><span class="m">8</span>.8.8.8
</code></pre></div></td></tr></table></div>

    - AnÃ lisi dels resultats: Quin nom de domini estÃ  associat a aquesta IP?

    **Consulta del TTL amb `dig`:**

    - Utilitza `dig` per veure el valor del TTL d'un domini:

     <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>dig<span class="w"> </span>google.com
</code></pre></div></td></tr></table></div>

    - AnÃ lisi dels resultats: Quants segons falten per a la caducitat del registre DNS a la memÃ²ria cau? AixÃ² afecta la velocitat amb quÃ¨ es poden fer noves consultes al DNS.

    **Mesura de la latÃ¨ncia amb `ping`:**

    - Utilitza la comanda `ping` per mesurar la latÃ¨ncia cap a un servidor com `google.com`:

     <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Bash</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>ping<span class="w"> </span>google.com
</code></pre></div></td></tr></table></div>

    - **AnÃ lisi dels resultats: Quins sÃ³n els temps de resposta? Quin impacte pot tenir la distÃ ncia geogrÃ fica i altres factors a la latÃ¨ncia?

    **Ping a una IP especÃ­fica:**

    - Prova de fer un `ping` a la IP 8.8.8.8 (Google DNS) i compara el temps de resposta amb el de `google.com`:

     ```bash
     ping 8.8.8.8
     ```  -->

<h2 id="annex-i-dig-amb-trace">Annex I: <code>dig</code> amb <code>+trace</code></h2>
<p>La comanda <code>dig</code> amb l'opciÃ³ <code>+trace</code> realitza una consulta de DNS (Domain Name System) que segueix la cadena de servidors DNS des del root fins al servidor autoritatiu per al domini solÂ·licitat. AixÃ² permet veure com el sistema de noms de domini resol el nom de domini, pas a pas, comenÃ§ant des dels servidors arrel i passant per cada nivell d'autoritat en el sistema DNS.</p>
<div class="admonition example">
<p class="admonition-title">Exemple de sortida de <code>dig +trace</code></p>
<p>Suposem que executem:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>dig +trace example.com
</code></pre></div></td></tr></table></div>
<p>L'eixida tÃ­pica podria veure's aixÃ­:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span>
<span class="normal"><a href="#__codelineno-13-30">30</a></span>
<span class="normal"><a href="#__codelineno-13-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; +trace example.com
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>;; global options: +cmd
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>.                       518400  IN  NS  a.root-servers.net.
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>.                       518400  IN  NS  b.root-servers.net.
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>.                       518400  IN  NS  c.root-servers.net.
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>.                       518400  IN  NS  d.root-servers.net.
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>.                       518400  IN  NS  e.root-servers.net.
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>.                       518400  IN  NS  f.root-servers.net.
<a id="__codelineno-13-9" name="__codelineno-13-9"></a>.                       518400  IN  NS  g.root-servers.net.
<a id="__codelineno-13-10" name="__codelineno-13-10"></a>.                       518400  IN  NS  h.root-servers.net.
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>.                       518400  IN  NS  i.root-servers.net.
<a id="__codelineno-13-12" name="__codelineno-13-12"></a>.                       518400  IN  NS  j.root-servers.net.
<a id="__codelineno-13-13" name="__codelineno-13-13"></a>.                       518400  IN  NS  k.root-servers.net.
<a id="__codelineno-13-14" name="__codelineno-13-14"></a>.                       518400  IN  NS  l.root-servers.net.
<a id="__codelineno-13-15" name="__codelineno-13-15"></a>.                       518400  IN  NS  m.root-servers.net.
<a id="__codelineno-13-16" name="__codelineno-13-16"></a>;; Received 108 bytes from 192.168.1.1#53(192.168.1.1) in 3 ms
<a id="__codelineno-13-17" name="__codelineno-13-17"></a>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a>com.                    172800  IN  NS  a.gtld-servers.net.
<a id="__codelineno-13-19" name="__codelineno-13-19"></a>com.                    172800  IN  NS  b.gtld-servers.net.
<a id="__codelineno-13-20" name="__codelineno-13-20"></a>com.                    172800  IN  NS  c.gtld-servers.net.
<a id="__codelineno-13-21" name="__codelineno-13-21"></a>com.                    172800  IN  NS  d.gtld-servers.net.
<a id="__codelineno-13-22" name="__codelineno-13-22"></a>com.                    172800  IN  NS  e.gtld-servers.net.
<a id="__codelineno-13-23" name="__codelineno-13-23"></a>com.                    172800  IN  NS  f.gtld-servers.net.
<a id="__codelineno-13-24" name="__codelineno-13-24"></a>;; Received 397 bytes from 198.41.0.4#53(198.41.0.4) in 50 ms
<a id="__codelineno-13-25" name="__codelineno-13-25"></a>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a>example.com.            172800  IN  NS  ns1.example.net.
<a id="__codelineno-13-27" name="__codelineno-13-27"></a>example.com.            172800  IN  NS  ns2.example.net.
<a id="__codelineno-13-28" name="__codelineno-13-28"></a>;; Received 118 bytes from 192.5.6.30#53(192.5.6.30) in 65 ms
<a id="__codelineno-13-29" name="__codelineno-13-29"></a>
<a id="__codelineno-13-30" name="__codelineno-13-30"></a>example.com.            86400   IN  A   93.184.216.34
<a id="__codelineno-13-31" name="__codelineno-13-31"></a>;; Received 56 bytes from 192.0.2.1#53(192.0.2.1) in 42 ms
</code></pre></div></td></tr></table></div>
</div>
<p><strong>Desglossament de l'eixida</strong>:</p>
<ol>
<li>
<p>Consultes als servidors arrel:</p>
<ul>
<li>Primer, la comanda consulta un dels servidors arrel (<code>a.root-servers.net</code>, <code>b.root-servers.net</code>, etc.). La resposta inclou els servidors de noms del domini de primer nivell (<code>com</code>, en aquest cas), indicant que <code>example.com</code> pertany al domini <code>.com</code>.</li>
</ul>
</li>
<li>
<p>Consulta als servidors de domini de primer nivell (TLD):</p>
<ul>
<li>DesprÃ©s, consulta un dels servidors TLD (<code>a.gtld-servers.net</code>, <code>b.gtld-servers.net</code>, etc.) per al domini <code>.com</code>. Els servidors TLD proporcionen els servidors de noms autoritaris per al domini <code>example.com</code>.</li>
</ul>
</li>
<li>
<p>Consulta als servidors autoritaris:</p>
<ul>
<li>DesprÃ©s, es realitza una consulta als servidors autoritaris per a <code>example.com</code>, en aquest cas <code>ns1.example.net</code> i <code>ns2.example.net</code>. Aquests sÃ³n els servidors que contenen la informaciÃ³ final sobre el domini solÂ·licitat.</li>
</ul>
</li>
<li>
<p>Resposta final:</p>
<ul>
<li>Finalment, un dels servidors autoritaris retorna l'adreÃ§a IP associada amb <code>example.com</code> (en aquest cas, 93.184.216.34).</li>
</ul>
</li>
</ol>
<p><strong>Aspectes clau en l'eixida</strong>:</p>
<ul>
<li><strong>NS (Name Server):</strong> Indica els servidors de noms que responen pel domini en cada nivell.</li>
<li><strong>A (Address):</strong> L'adreÃ§a IP associada amb el domini solÂ·licitat.</li>
<li><strong>Temps de resposta:</strong> El temps en milÂ·lisegons (<code>ms</code>) indica quant de temps va trigar a rebre la resposta des del servidor corresponent.</li>
<li><strong>Pas a pas:</strong> La comanda mostra cada consulta que es realitza i com es resol, permetent veure la cadena completa de servidors DNS.</li>
</ul>
<p><strong>Per quÃ¨ usar <code>+trace</code>?</strong></p>
<p>Usar <code>+trace</code> Ã©s Ãºtil per depurar problemes amb la resoluciÃ³ de noms, ja que permet veure exactament quins servidors estan involucrats i quines respostes estan retornant. AixÃ² Ã©s Ãºtil per detectar problemes de configuraciÃ³, com si un servidor DNS autoritari no estÃ  responent correctament o si hi ha un error en els registres DNS.</p>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Torna a l'inici
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Peu de pÃ gina" >
        
          
          <a href="../SMX2-SXA-3/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: UD3. El servei DHCP">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                UD3. El servei DHCP
              </div>
            </div>
          </a>
        
        
          
          <a href="../SMX2-SXA-5/" class="md-footer__link md-footer__link--next" aria-label="SegÃ¼ent: UD5. El servei HTTP">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                SegÃ¼ent
              </span>
              <div class="md-ellipsis">
                UD5. El servei HTTP
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Apunts SXA - 2SMX by P.Galera & J.Beteta es troba sota llicÃ¨ncia CC BY-NC-SA 4.0 - <a href="#__consent">Canvia la configuraciÃ³ de les cookies</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:fj.galerataberner@edu.gva.es" target="_blank" rel="noopener" title="Contacte" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Consentiment de Cookies</h4>
<p>Utilitzem cookies per reconÃ¨ixer les vostres visites i preferÃ¨ncies repetides, aixÃ­ com per mesurar l'eficÃ cia de la nostra documentaciÃ³ i si els usuaris troben el que estan cercant. Amb el vostre consentiment, ens esteu ajudant a millorar la nostra documentaciÃ³.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accepta</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestiona la configuraciÃ³</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.footer", "toc.follow", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}}</script>
    
    
      <script src="../assets/javascripts/bundle.af256bd8.min.js"></script>
      
    
  </body>
</html>